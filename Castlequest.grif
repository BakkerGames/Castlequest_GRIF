// Castlequest.grif - GRIF format
@addscore(x)
	@addto(value.score,$x)
	@if @true(@get(value.debug)) @then
		@write("\n  ### ADD ",$x," POINTS, SCORE = ",@get(value.score),"\n")
	@endif
@carry(x)
	@eq(@get(item.$x.location),@inv)
@dark
	@comment("is it dark here?")
	@if @le(@room,40) @or @ge(@room,95) @then
		@write("false")
	@elseif @herecarry(21) @and @ge(@get(value.lamp),1) @and @le(@get(value.lamp),2) @then
		@write("false")
	@elseif @herecarry(15) @and @eq(@get(value.match),1) @then
		@write("false")
	@else
		@write("true")
	@endif
@dead
	@script(script.dead)
@drop(x)
	@sendto($x,@room)
@gameover
	@script(script.gameover)
@goto(x)
	@if @ge(@room,57) @and @le(@room,64) @then
		@set(value.lroom,@add(@rnd(6),58))
	@else
		@set(value.lroom,@get(value.room))
	@endif
	@set(value.room,$x)
	@incmoves
	@look
@here(x)
	@eq(@get(item.$x.location),@room)
@herecarry(x)
	@if @eq(@get(item.$x.location),@room) @or @eq(@get(item.$x.location),@inv) @then
		@write("true")
	@else
		@write("false")
	@endif
@incmoves
	@addto(value.numove,1)
	@if @true(@get(value.debug)) @then
		@write("\n  ### MOVES = ",@get(value.numove),"\n")
	@endif
	@script(script.lamp_moves)
	@script(script.match_moves)
@inv
	-1
@isroom(x)
	@eq(@room,$x)
@itemloc(x,y)
	@eq(@get(item.$x.location),$y)
@look
	@if @dark @and @false(@get(value.debug)) @then
		@msg(message.1064)
	@else
		@if @true(@get(value.debug)) @then
			@write("\n  ### ROOM #",@room,"\n")
			@if @dark @then
				@write("\n  ### DARK\n")
			@endif
		@endif
		@script(script.roomimage)
		@script(@concat("room.",@room,".beforelook"))
		@if @true(@get(@concat("room.",@room,".visited"))) @or @eq(@get(value.ibrief),1) @then
			@msg(@concat("room.",@room,".shortdesc"))
		@else
			@msg(@concat("room.",@room,".longdesc"))
			@set(@concat("room.",@room,".visited"),true)
		@endif
		@script(@concat("room.",@room,".afterlook"))
		@for(i,1,@get(value.nitems))
			@if @here($i) @then
				@set(temp.show,true)
				@if @isroom(84) @and @true(@get(value.prec)) @then
					@if @eq($i,9) @or @eq($i,16) @then
						@set(temp.show,false)
					@endif
				@endif
				@if @isroom(1) @and @eq($i,9) @and @eq(@get(value.rope),2) @then
					@set(temp.show,false)
				@endif
				@if @true(@get(temp.show)) @then
					@msg(item.$i.longdesc)
					@if @gt(@get(item.$i.findvalue),0) @then
						@addscore(@get(item.$i.findvalue))
						@set(item.$i.findvalue,0)
					@endif
				@endif
			@endif
		@endfor
	@endif
@lookfull
	@set(@concat("room.",@room,".visited"),false)
	@look
@modmessages
	@foreachkey(i,"modmsg.")
		@msg(modmsg.$i)
	@endforeachkey
@quit
	@setoutchannel("#GAMEOVER;")
@room
	@get(value.room)
@score
	@script(script.score)
@sendto(x,y)
	@if @carry($x) @then
		@subto(value.numb,1)
	@endif
	@set(item.$x.location,$y)
	@if @carry($x) @then
		@addto(value.numb,1)
	@endif
@take(x)
	@if @carry($x) @then
		@msg(message.1096)
	@else
		@if @ge(@get(value.numb),@get(value.maxinv)) @then
			@msg(message.1012)
		@else
			@sendto($x,@inv)
			@msg(message.1008)
			@script(item.$x.aftertake)
		@endif
	@endif
background.1
	@comment("show intro")
	@if @false(@get(value.introdone)) @then
		@set(value.introdone,true)
		@msg(message.1001)
		@setoutchannel("#ASK;")
		@setoutchannel("@script(script.intro1)")
	@endif
background.2
	@comment("hunchback following")
	@if @carry(8) @then
		@msg(message.des.421)
	@endif
background.3
	@comment("move hunchback around maze")
	@if @ge(@get(item.8.location),57) @and @le(@get(item.8.location),64) @then
		@sendto(8,@add(@rnd(7),57))
	@endif
background.4
	@comment("sun setting - CQ1980 used 100 moves")
	@if @gt(@get(value.numove),150) @then
		@if @eq(@get(value.sun),0) @then
			@if @lt(@get(value.master),4) @then
				@msg(message.1089)
			@endif
			@set(value.sun,1)
		@endif
	@endif
background.7
	@comment("wolf")
	@if @false(@get(value.norandom)) @then
		@if @true(@get(value.wolf)) @then
			@script(script.wwolf)
		@elseif @gt(@get(value.numove),15) @and @ge(@room,4) @and @le(@room,25) @then
			@script(script.wwolf)
		@endif
	@endif
background.8
	@comment("gnome")
	@if @false(@get(value.norandom)) @then
		@if @true(@get(value.gnome)) @then
			@script(script.ggnome)
		@elseif @ge(@room,45) @and @le(@room,92) @then
			@script(script.ggnome)
		@endif
	@endif
background.9
	@comment("wolf vs hunchback")
	@if @true(@get(value.wolf)) @and @carry(8) @then
		@msg(message.des.429)
		@set(value.hunch,2)
		@sendto(8,0)
		@set(value.wolf,false)
	@endif
background.10
	@comment("footsteps")
	@if @false(@get(value.norandom)) @then
		@if @ne(@room,1) @and @lt(@rnd(1000),8) @then
			@msg(message.1145)
		@endif
	@endif
background.11
	@comment("drop in mirror maze, send to upstairs hallway")
	@for(i,1,@get(value.nitems))
		@if @itemloc($i,27) @then
			@sendto($i,9)
		@endif
	@endfor
command.1
	@comment("north")
	@set(temp.nextroom,@get(@concat("room.",@room,".exit.n")))
	@script(script.movenextroom)
command.2
	@comment("ne")
	@set(temp.nextroom,@get(@concat("room.",@room,".exit.ne")))
	@script(script.movenextroom)
command.3
	@comment("east")
	@set(temp.nextroom,@get(@concat("room.",@room,".exit.e")))
	@script(script.movenextroom)
command.4
	@comment("se")
	@set(temp.nextroom,@get(@concat("room.",@room,".exit.se")))
	@script(script.movenextroom)
command.5
	@comment("south")
	@set(temp.nextroom,@get(@concat("room.",@room,".exit.s")))
	@script(script.movenextroom)
command.6
	@comment("sw")
	@set(temp.nextroom,@get(@concat("room.",@room,".exit.sw")))
	@script(script.movenextroom)
command.7
	@comment("west")
	@set(temp.nextroom,@get(@concat("room.",@room,".exit.w")))
	@script(script.movenextroom)
command.8
	@comment("nw")
	@set(temp.nextroom,@get(@concat("room.",@room,".exit.nw")))
	@script(script.movenextroom)
command.9
	@comment("up")
	@set(temp.nextroom,@get(@concat("room.",@room,".exit.u")))
	@script(script.movenextroom)
command.10
	@comment("down")
	@set(temp.nextroom,@get(@concat("room.",@room,".exit.d")))
	@script(script.movenextroom)
command.11.*
	@comment("take something")
	@if @here(@get(input.noun)) @then
		@take(@get(input.noun))
		@comment("inv might be full")
		@if @carry(@get(input.noun)) @then
			@incmoves
		@endif
	@else
		@msg(message.1003)
	@endif
command.11.5
	@comment("take blood")
	@if @carry(18) @then
		@if @true(@get(value.bottle)) @then
			@msg(message.1099)
		@elseif @here(5) @then
			@sendto(18,0)
			@sendto(5,@inv)
			@set(value.bottle,true)
			@set(value.blood,true)
			@incmoves
			@msg(message.1008)
		@else
			@msg(message.1003)
		@endif
	@else
		@msg(message.1074)
	@endif
command.11.6
	@comment("take stake")
	@if @carry(6) @then
		@msg(message.1096)
	@elseif @here(6) @or @isroom(12) @then
		@comment("room 12 has infinite stakes")
		@if @ge(@get(value.numb),@get(value.maxinv)) @then
			@msg(message.1012)
		@else
			@sendto(6,@inv)
			@incmoves
			@msg(message.1008)
		@endif
	@endif
command.11.8
	@comment("take hunchback")
	@if @here(8) @then
		@if @eq(@get(value.hunch),0) @then
			@msg(message.1093)
		@elseif @ge(@get(value.numb),@get(value.maxinv)) @then
			@msg(message.1012)
		@else
			@sendto(8,@inv)
			@incmoves
			@msg(message.1008)
			@script(item.8.aftertake)
		@endif
	@else
		@msg(message.1003)
	@endif
command.11.9
	@comment("take rope")
	@if @true(@get(value.prec)) @and @isroom(83) @then
		@msg(message.1111)
	@elseif @isroom(29) @and @eq(@get(value.rope),2) @then
		@msg(message.1111)
	@elseif @isroom(1) @then
		@if @here(9) @or @eq(@get(value.rope),1) @or @eq(@get(value.rope),2) @then
			@set(value.rope,0)
			@sendto(9,1)
			@take(9)
			@incmoves
		@else
			@msg(message.1003)
		@endif
	@elseif @here(9) @then
		@if @eq(@get(value.rope),3) @then
			@set(value.rope,0)
		@endif
		@set(value.prec,false)
		@take(9)
		@incmoves
	@else
		@msg(message.1003)
	@endif
command.11.16
	@comment("take hook")
	@if @true(@get(value.prec)) @and @isroom(83) @then
		@msg(message.1111)
	@elseif @here(16) @then
		@if @eq(@get(value.rope),3) @then
			@set(value.rope,0)
		@endif
		@set(value.prec,false)
		@take(16)
		@incmoves
	@else
		@msg(message.1003)
	@endif
command.11.20
	@comment("take gun")
	@if @carry(20) @then
		@msg(message.1096)
	@elseif @here(20) @or @isroom(3) @then
		@comment("room 3 has infinite guns")
		@if @ge(@get(value.numb),@get(value.maxinv)) @then
			@msg(message.1012)
		@else
			@sendto(20,@inv)
			@incmoves
			@msg(message.1008)
		@endif
	@endif
command.11.26
	@comment("take water")
	@if @carry(18) @then
		@if @true(@get(value.bottle)) @then
			@msg(message.1099)
		@elseif @isroom(32) @or @isroom(40) @or @isroom(68) @or @isroom(81) @or @here(26) @then
			@sendto(18,0)
			@sendto(26,@inv)
			@set(value.bottle,true)
			@set(value.water,true)
			@incmoves
			@msg(message.1008)
		@else
			@msg(message.1003)
		@endif
	@else
		@msg(message.1074)
	@endif
command.11.31
	@comment("take all")
	@set(temp.count,0)
	@set(temp.full,false)
	@for(i,1,@get(value.nitems))
		@if @ne($i,5) @and @ne($i,26) @then
			@if @false(@get(temp.full)) @and @here($i) @then
				@if @ge(@get(value.numb),@get(value.maxinv)) @then
					@set(temp.full,true)
				@else
					@sendto($i,@inv)
					@addto(temp.count,1)
				@endif
			@endif
		@endif
	@endfor
	@if @true(@get(temp.full)) @then
		@msg(message.1012)
	@elseif @gt(@get(temp.count),0) @then
		@msg(message.1008)
	@else
		@msg(message.1003)
	@endif
	@if @gt(@get(temp.count),0) @then
		@incmoves
	@endif
command.11.46
	@comment("take book")
	@if @isroom(10) @or @isroom(13) @then
		@msg(message.1033)
	@else
		@msg(message.1003)
	@endif
command.11.49
	@comment("take butler")
	@if @isroom(8) @then
		@if @eq(@get(value.but),4) @then
			@msg(message.1146)
		@else
			@msg(message.1034)
		@endif
	@else
		@msg(message.1003)
	@endif
command.11.52
	@comment("take note")
	@msg(message.1045)
command.12.*
	@comment("drop something")
	@if @carry(@get(input.noun)) @then
		@drop(@get(input.noun))
		@incmoves
		@msg(message.1008)
	@else
		@msg(message.1004)
	@endif
command.12.2
	@comment("drop bullet")
	@if @carry(2) @or @true(@get(value.gun)) @then
		@set(value.gun,false)
		@drop(2)
		@incmoves
		@msg(message.1008)
		@script(item.2.afterdrop)
	@else
		@msg(message.1004)
	@endif
command.12.5
	@comment("drop blood")
	@if @carry(5) @then
		@drop(5)
		@incmoves
		@msg(message.1008)
		@script(item.5.afterdrop)
	@else
		@msg(message.1004)
	@endif
command.12.9
	@comment("drop rope")
	@if @carry(9) @then
		@drop(9)
		@incmoves
		@msg(message.1008)
		@script(item.9.afterdrop)
	@else
		@msg(message.1004)
	@endif
command.12.10
	@comment("drop paper")
	@if @carry(10) @then
		@drop(10)
		@incmoves
		@script(item.10.afterdrop)
	@else
		@msg(message.1004)
	@endif
command.12.11
	@comment("drop pen")
	@if @carry(11) @then
		@drop(11)
		@incmoves
		@script(item.11.afterdrop)
	@else
		@msg(message.1004)
	@endif
command.12.16
	@comment("drop hook")
	@if @carry(16) @then
		@drop(16)
		@incmoves
		@msg(message.1008)
		@script(item.16.afterdrop)
	@elseif @carry(9) @and @eq(@get(value.rope),3) @then
		@script(command.12.9)
	@else
		@msg(message.1004)
	@endif
command.12.18
	@comment("drop bottle")
	@if @carry(18) @or @carry(5) @or @carry(26) @then
		@drop(18)
		@incmoves
		@msg(message.1008)
		@script(item.18.afterdrop)
	@else
		@msg(message.1004)
	@endif
command.12.20
	@comment("drop gun")
	@if @carry(20) @then
		@drop(20)
		@incmoves
		@msg(message.1008)
		@script(item.20.afterdrop)
	@else
		@msg(message.1004)
	@endif
command.12.26
	@comment("drop water")
	@if @carry(26) @then
		@drop(26)
		@incmoves
		@msg(message.1008)
		@script(item.26.afterdrop)
	@else
		@msg(message.1004)
	@endif
command.12.31
	@comment("drop all")
	@set(temp.count,0)
	@for(i,1,@get(value.nitems))
		@if @carry($i) @then
			@drop($i)
			@addto(temp.count,1)
			@script(item.$i.afterdrop)
		@endif
	@endfor
	@if @gt(@get(temp.count),0) @then
		@incmoves
		@msg(message.1008)
	@else
		@msg(message.1004)
	@endif
command.13
	@comment("enter in a direction")
	@set(temp.x,@get(@concat("room.",@room,".exit.enter")))
	@set(temp.nextroom,@get(@concat("room.",@room,".exit.",@get(temp.x))))
	@script(script.movenextroom)
command.14
	@comment("leave in a direction")
	@set(temp.x,@get(@concat("room.",@room,".exit.leave")))
	@set(temp.nextroom,@get(@concat("room.",@room,".exit.",@get(temp.x))))
	@script(script.movenextroom)
command.15
	@comment("attack")
	@if @true(@get(value.wolf)) @then
		@script(command.15.76)
	@elseif @true(@get(value.gnome)) @then
		@script(command.15.77)
	@elseif @isroom(43) @and @gt(@get(value.master),0) @and @lt(@get(value.master),4) @then
		@script(command.15.39)
	@elseif @isroom(8) @and @lt(@get(value.but),4) @then
		@script(command.15.49)
	@elseif @isroom(20) @and @true(@get(value.bat)) @then
		@script(command.15.55)
	@elseif @isroom(86) @and @false(@get(value.hole)) @then
		@script(command.15.78)
	@elseif @isroom(93) @and @true(@get(value.wiz)) @then
		@script(command.15.80)
	@elseif @herecarry(8) @then
		@script(command.15.8)
	@else
		@msg(message.des.418)
	@endif
command.15.*
	@comment("attack something")
	@if @not @exists(@concat("command.15.",@get(input.noun))) @then
		@msg(message.1002)
	@else
		@script(@concat("command.15.",@get(input.noun)))
	@endif
command.15.8
	@comment("attack hunchback")
	@if @herecarry(8) @then
		@msg(message.1039)
		@setoutchannel("#ASK;")
		@setoutchannel("@script(script.attack_hunchback)")
	@else
		@msg(message.1003)
	@endif
command.15.39
	@comment("attack master")
	@if @isroom(43) @and @gt(@get(value.master),0) @and @lt(@get(value.master),4) @then
		@msg(message.1039)
		@setoutchannel("#ASK;")
		@setoutchannel("@script(script.attack_master)")
	@else
		@msg(message.1003)
	@endif
command.15.49
	@comment("attack butler")
	@if @isroom(8) @and @lt(@get(value.but),4) @then
		@msg(message.1039)
		@setoutchannel("#ASK;")
		@setoutchannel("@script(script.attack_butler)")
	@else
		@msg(message.1003)
	@endif
command.15.55
	@comment("attack bat")
	@if @isroom(20) @and @true(@get(value.bat)) @then
		@msg(message.1039)
		@setoutchannel("#ASK;")
		@setoutchannel("@script(script.attack_bat)")
	@else
		@msg(message.1003)
	@endif
command.15.76
	@comment("attack wolf")
	@if @true(@get(value.wolf)) @then
		@if @carry(20) @and @true(@get(value.gun)) @then
			@script(script.shoot_wolf)
		@else
			@msg(message.1039)
			@setoutchannel("#ASK;")
			@setoutchannel("@script(script.attack_wolf)")
		@endif
	@else
		@msg(message.1003)
	@endif
command.15.77
	@comment("attack gnome")
	@if @true(@get(value.gnome)) @then
		@msg(message.1107)
	@else
		@msg(message.1003)
	@endif
command.15.78
	@comment("attack cyclops")
	@if @isroom(86) @and @false(@get(value.hole)) @then
		@msg(message.1122)
	@else
		@msg(message.1003)
	@endif
command.15.80
	@comment("attack wizard")
	@if @isroom(93) @and @true(@get(value.wiz)) @then
		@msg(message.1129)
	@else
		@msg(message.1003)
	@endif
command.17
	@comment("throw")
	@if @carry(3) @then
		@script(command.17.3)
	@else
		@write("\n  ",@upper(@get(input.verbword))," what?\n")
	@endif
command.17.*
	@comment("throw something -> drop something")
	@script(command.12.*)
command.17.3
	@comment("throw axe")
	@if @carry(3) @and @lt(@room,95) @then
		@drop(3)
		@incmoves
		@if @isroom(6) @and @eq(@get(room.6.door),0) @then
			@set(room.6.door,1)
			@msg(message.1041)
		@elseif @true(@get(value.gnome)) @then
			@if @rand(80) @then
				@set(value.gnome,false)
				@msg(message.1108)
			@else
				@msg(message.1109)
			@endif
		@else
			@msg(message.1008)
		@endif
	@elseif @carry(3) @and @isroom(99) @then
		@set(value.masect,true)
		@incmoves
		@msg(message.1136)
	@else
		@msg(message.1003)
	@endif
command.17.6
	@comment("throw stake -> stab count")
	@script(command.21.39)
command.17.9
	@comment("throw rope")
	@if @isroom(1) @and @eq(@get(value.wind1),3) @then
		@if @carry(9) @and @eq(@get(value.rope),0) @then
			@sendto(9,29)
			@incmoves
			@msg(message.1071)
			@script(script.lost_rope)
		@elseif @eq(@get(value.rope),1) @then
			@set(value.rope,2)
			@addscore(@get(value.ropval))
			@set(value.ropval,0)
			@incmoves
			@msg(message.1070)
		@elseif @eq(@get(value.rope),2) @then
			@msg(message.1072)
		@else
			@script(command.12.9)
		@endif
	@elseif @carry(9) @then
		@if @isroom(83) @and @eq(@get(value.rope),3) @then
			@script(script.rope_hook_prec)
		@else
			@script(command.12.9)
		@endif
	@else
		@msg(message.1004)
	@endif
command.17.12
	@comment("throw sword")
	@if @carry(12) @then
		@drop(12)
		@incmoves
		@if @isroom(99) @and @false(@get(value.masect)) @then
			@set(value.masect,true)
			@msg(messege.1136)
		@elseif @isroom(93) @and @true(@get(value.wiz)) @then
			@sendto(13,86)
			@msg(message.1133)
			@dead
		@elseif @true(@get(value.gnome)) @then
			@if @rand(80) @then
				@set(value.gnome,false)
				@msg(message.1108)
			@else
				@msg(message.1109)
			@endif
		@else
			@msg(message.1008)
		@endif
	@else
		@msg(message.1004)
	@endif
command.17.16
	@comment("throw hook")
	@if @isroom(83) @and @eq(@get(value.rope),3) @then
		@script(script.rope_hook_prec)
	@elseif @carry(16) @then
		@drop(16)
		@incmoves
		@msg(message.1008)
		@script(item.16.afterdrop)
	@else
		@msg(message.1004)
	@endif
command.17.25
	@comment("throw acid")
	@if @carry(25) @then
		@sendto(25,0)
		@incmoves
		@if @isroom(1) @and @eq(@get(value.shuttr),1) @then
			@set(value.wind1,3)
			@msg(message.1061)
		@else
			@if @isroom(10) @and @eq(@get(value.wind2),0) @then
				@set(value.wind2,3)
				@msg(message.1061)
			@elseif @true(@get(value.wolf)) @then
				@msg(message.1062)
				@set(value.wolf,false)
			@else
				@msg(message.1063)
			@endif
			@script(script.lost_acid)
		@endif
	@else
		@msg(message.1003)
	@endif
command.17.26
	@comment("throw water")
	@if @isroom(47) @and @true(@get(value.fire)) @then
		@script(command.34.34)
	@elseif @carry(26) @then
		@set(value.bottle,false)
		@set(value.water,false)
		@sendto(26,0)
		@drop(18)
		@incmoves
		@msg(message.1008)
	@endif
command.17.27
	@comment("throw cigar")
	@if @carry(27) @then
		@if @isroom(86) @and @false(@get(value.hole)) @then
			@sendto(27,-3)
			@incmoves
			@msg(message.1119)
		@else
			@drop(27)
			@incmoves
			@msg(message.1008)
		@endif
	@else
		@msg(message.1004)
	@endif
command.18
	@comment("load -> load gun")
	@script(command.18.20)
command.18.20
	@comment("load gun")
	@if @carry(20) @then
		@if @true(@get(value.gun)) @then
			@msg(message.1005)
		@elseif @carry(2) @then
			@set(value.gun,true)
			@sendto(2,0)
			@incmoves
			@msg(message.1008)
		@else
			@msg(message.1007)
		@endif
	@else
		@msg(message.1003)
	@endif
command.19
	@comment("swear")
	@msg(message.1047)
command.19.*
	@comment("swear something")
	@msg(message.1079)
command.20.3
	@comment("wave axe")
	@if @carry(3) @then
		@incmoves
		@if @isroom(95) @and @false(@get(value.mas1)) @then
			@set(value.mas1,true)
			@addscore(3)
			@msg(message.1137)
		@elseif @isroom(96) @and @false(@get(value.mas2)) @then
			@set(value.mas2,true)
			@addscore(2)
			@msg(message.1138)
		@elseif @isroom(97) @and @false(@get(value.mas3)) @then
			@set(value.mas3,true)
			@addscore(3)
			@msg(message.1139)
		@elseif @isroom(98) @and @false(@get(value.mas4)) @then
			@set(value.mas4,true)
			@addscore(2)
			@msg(message.1140)
		@else
			@msg(message.1095)
		@endif
	@else
		@msg(message.1004)
	@endif
command.20.12
	@comment("wave sword")
	@if @carry(12) @then
		@if @isroom(93) @and @true(@get(value.wiz)) @then
			@set(value.wiz,false)
			@incmoves
			@msg(message.1134)
			@msg(message.1135)
		@else
			@msg(message.1095)
		@endif
	@else
		@msg(message.1004)
	@endif
command.20.19
	@comment("wave cross")
	@if @carry(19) @then
		@if @isroom(43) @and @gt(@get(value.master),0) @and @lt(@get(value.master),4) @then
			@set(value.master,2)
			@incmoves
			@msg(message.des.425)
		@else
			@msg(message.1095)
		@endif
	@else
		@msg(message.1003)
	@endif
command.21.8
	@comment("stab hunchback")
	@if @carry(12) @then
		@if @herecarry(8) @then
			@sendto(8,0)
			@set(value.hunch,2)
			@incmoves
			@msg(message.1056)
		@else
			@msg(message.1003)
		@endif
	@else
		@msg(message.1003)
	@endif
command.21.39
	@comment("stab count")
	@if @isroom(43) @then
		@if @eq(@get(value.master),0) @then
			@msg(message.1003)
		@elseif @eq(@get(value.master),4) @then
			@msg(message.1005)
		@elseif @carry(6) @then
			@msg(message.1087)
			@set(value.master,4)
			@sendto(6,0)
			@addscore(25)
			@comment("mirror maze exits")
			@for(i,1,10)
				@set(wher.$i,2)
			@endfor
			@incmoves
			@msg(message.1130)
			@msg(message.1131)
		@else
			@msg(message.1086)
		@endif
	@else
		@msg(message.1003)
	@endif
command.21.49
	@comment("stab butler")
	@if @carry(12) @then
		@if @isroom(8) @and @lt(@get(value.but),4) @then
			@set(value.but,4)
			@incmoves
			@msg(message.1055)
		@else
			@msg(message.1003)
		@endif
	@else
		@msg(message.1060)
	@endif
command.21.55
	@comment("stab bat")
	@if @carry(12) @then
		@if @isroom(20) @and @true(@get(value.bat)) @then
			@msg(message.des.419)
		@else
			@msg(message.1003)
		@endif
	@else
		@msg(message.1060)
	@endif
command.21.76
	@comment("stab wolf")
	@if @carry(12) @then
		@if @true(@get(value.wolf)) @then
			@msg(message.des.420)
		@else
			@msg(message.1003)
		@endif
	@else
		@msg(message.1060)
	@endif
command.21.77
	@comment("stab gnome")
	@if @carry(12) @then
		@if @true(@get(value.gnome)) @then
			@comment("throw sword")
			@script(command.17.12)
		@else
			@msg(message.1003)
		@endif
	@else
		@msg(message.1060)
	@endif
command.21.78
	@comment("stab cyclops")
	@if @carry(12) @then
		@if @isroom(86) @and @false(@get(value.hole)) @then
			@msg(message.1123)
		@else
			@msg(message.1003)
		@endif
	@else
		@msg(message.1060)
	@endif
command.21.80
	@comment("stab wizard")
	@if @carry(12) @then
		@if @isroom(93) @and @true(@get(value.wiz)) @then
			@incmoves
			@msg(message.1133)
			@dead
		@else
			@msg(message.1003)
		@endif
	@else
		@msg(message.1060)
	@endif
command.22.8
	@comment("feed hunchback")
	@if @here(8) @then
		@if @carry(22) @then
			@set(value.hunch,1)
			@sendto(22,0)
			@incmoves
			@msg(message.1090)
		@else
			@msg(message.1097)
		@endif
	@else
		@msg(message.1003)
	@endif
command.22.49
	@comment("feed butler")
	@if @isroom(8) @then
		@if @eq(@get(value.but),4) @then
			@msg(message.1005)
		@elseif @carry(22) @then
			@msg(message.1092)
		@else
			@msg(message.1097)
		@endif
	@else
		@msg(message.1003)
	@endif
command.22.55
	@comment("feed bat")
	@if @isroom(20) @and @true(@get(value.bat)) @then
		@if @carry(5) @then
			@sendto(5,0)
			@sendto(18,@inv)
			@set(value.bat,false)
			@set(value.bottle,false)
			@set(value.blood,false)
			@incmoves
			@msg(message.1051)
		@elseif @carry(22) @then
			@msg(message.1052)
		@else
			@msg(message.1050)
		@endif
	@else
		@msg(message.1003)
	@endif
command.22.76
	@comment("feed wolf")
	@if @carry(22) @then
		@if @true(@get(value.wolf)) @then
			@msg(message.1091)
		@else
			@msg(message.1003)
		@endif
	@else
		@msg(message.1097)
	@endif
command.22.78
	@comment("feed cyclops")
	@if @isroom(86) @and @false(@get(value.hole)) @then
		@msg(message.1124)
	@else
		@msg(message.1003)
	@endif
command.23.*
	@comment("eat something")
	@msg(message.1016)
command.23.22
	@comment("eat food")
	@if @herecarry(22) @then
		@sendto(22,-3)
		@incmoves
		@msg(message.1017)
	@else
		@msg(message.1004)
	@endif
command.24.*
	@comment("drink something")
	@msg(message.1016)
command.24.5
	@comment("drink blood")
	@if @herecarry(5) @then
		@msg(message.1016)
	@else
		@msg(message.1003)
	@endif
command.24.7
	@comment("drink champagne")
	@if @carry(7) @then
		@msg(message.1104)
	@else
		@msg(message.1003)
	@endif
command.24.25
	@comment("drink acid")
	@if @carry(25) @then
		@sendto(25,0)
		@incmoves
		@msg(message.1113)
		@script(script.lost_acid)
	@else
		@msg(message.1003)
	@endif
command.24.26
	@comment("drink water")
	@if @isroom(32) @or @isroom(40) @or @isroom(68) @or @isroom(81) @then
		@msg(message.1018)
	@elseif @carry(26) @then
		@set(value.bottle,false)
		@set(value.water,false)
		@swap(item.26.location,item.18.location)
		@incmoves
		@msg(message.1018)
	@else
		@msg(message.1003)
	@endif
command.25
	@comment("jump")
	@if @isroom(1) @then
		@if @eq(@get(value.wind1),3) @then
			@incmoves
			@msg(message.died.7001)
			@dead
		@else
			@msg(message.1080)
		@endif
	@elseif @isroom(10) @then
		@if @eq(@get(value.wind2),3) @then
			@goto(39)
			@set(value.lroom,0)
		@else
			@msg(message.1080)
		@endif
	@elseif @isroom(38) @then
		@msg(message.1059)
	@elseif @isroom(42) @then
		@incmoves
		@msg(message.died.7007)
		@dead
	@elseif @isroom(67) @or @isroom(76) @then
		@incmoves
		@msg(message.1105)
		@dead
	@else
		@msg(message.1080)
	@endif
command.26
	@comment("inventory")
	@if @eq(@get(value.numb),0) @then
		@msg(message.carry.3000)
	@else
		@set(temp.count,@get(value.numb))
		@if @carry(8) @then
			@subto(temp.count,1)
		@endif
		@if @eq(@get(value.numb),1) @then
			@msg(message.carry.1010)
		@else
			@write(@format(@get(message.carry.1000),@get(temp.count)))
			@nl
		@endif
		@for(i,1,@get(value.nitems))
			@if @ne($i,8) @and @carry($i) @then
				@write("     ",@get(item.$i.shortdesc))
				@nl
			@endif
		@endfor
	@endif
command.27
	@comment("open")
	@if @le(@room,25) @then
		@script(command.27.47)
	@elseif @isroom(86) @or @isroom(88) @then
		@msg(message.1125)
	@else
		@msg(message.1013)
	@endif
command.27.*
	@comment("open *")
	@msg(message.1013)
command.27.33
	@comment("open lock")
	@if @isroom(21) @then
		@msg(message.1026)
	@else
		@msg(message.1003)
	@endif
command.27.37
	@comment("open window")
	@if @isroom(1) @then
		@if @eq(@get(value.shuttr),0) @then
			@msg(message.des.417)
		@elseif @eq(@get(value.wind1),0) @then
			@msg(message.des.405)
		@else
			@msg(message.des.408)
		@endif
	@else
		@msg(message.1003)
	@endif
command.27.38
	@comment("open shutter")
	@if @isroom(1) @then
		@if @eq(@get(value.shuttr),0) @then
			@set(value.shuttr,1)
			@incmoves
		@endif
		@msg(message.1022)
		@if @itemloc(17,29) @then
			@msg(message.des.428)
		@endif
	@else
		@msg(message.1003)
	@endif
command.27.40
	@comment("open coffin")
	@if @isroom(43) @then
		@if @lt(@get(value.master),4) @then
			@set(value.master,@add(1,@mul(2,@get(value.sun))))
			@incmoves
		@endif
		@msg(@concat("message.des.",@add(@get(value.master),423)))
	@else
		@msg(message.1013)
	@endif
command.27.46
	@comment("open book")
	@if @isroom(10) @or @isroom(13) @then
		@if @isroom(13) @and @itemloc(4,-3) @then
			@drop(4)
			@set(value.note,1)
			@incmoves
			@msg(message.1027)
		@else
			@msg(message.1028)
		@endif
	@else
		@msg(message.1003)
	@endif
command.27.47
	@comment("open door")
	@if @isroom(86) @or @isroom(88) @then
		@msg(message.1125)
	@elseif @isroom(6) @then
		@if @eq(room.6.door,0) @then
			@msg(message.1021)
		@elseif @eq(room.6.door,2) @then
			@msg(message.1020)
		@else
			@set(room.6.door,2)
			@addscore(@get(value.notval))
			@set(value.notval,0)
			@goto(7)
		@endif
	@elseif @eq(@get(@concat("room.",@room,".door")),-2) @then
		@msg(message.1036)
	@elseif @eq(@get(@concat("room.",@room,".door")),-1) @then
		@msg(message.1025)
	@elseif @eq(@get(@concat("room.",@room,".door")),0) @then
		@msg(message.1019)
	@elseif @eq(@get(@concat("room.",@room,".door")),2) @then
		@msg(message.1020)
	@else
		@set(@concat("room.",@room,".door"),2)
		@if @isroom(6) @then
			@addscore(@get(value.notval))
			@set(value.notval,0)
			@goto(7)
		@else
			@incmoves
			@msg(message.1008)
		@endif
	@endif
command.27.48
	@comment("open drawer")
	@if @isroom(1) @then
		@if @itemloc(19,0) @then
			@set(item.19.location,@room)
			@addscore(@get(item.19.findvalue))
			@set(item.19.findvalue,0)
			@incmoves
			@msg(message.1024)
		@else
			@msg(message.1008)
		@endif
	@else
		@msg(message.1003)
	@endif
command.28.*
	@comment("close something")
	@msg(message.1013)
command.28.37
	@comment("close window")
	@if @isroom(1) @then
		@if @eq(@get(value.shuttr),0) @then
			@msg(message.des.417)
		@elseif @ge(@get(value.wind1),1) @then
			@msg(message.1031)
		@else
			@msg(message.1008)
		@endif
	@elseif @isroom(10) @then
		@if @eq(@get(value.wind2),1) @then
			@msg(message.1031)
		@else
			@msg(message.1008)
		@endif
	@else
		@msg(message.1003)
	@endif
command.28.38
	@comment("close shutter")
	@if @isroom(1) @then
		@if @eq(@get(value.shuttr),1) @then
			@set(value.shuttr,0)
			@incmoves
		@endif
		@msg(message.1008)
	@else
		@msg(message.1003)
	@endif
command.28.40
	@comment("close coffin")
	@if @isroom(43) @then
		@if @ge(@get(value.master),3) @then
			@msg(message.1005)
		@elseif @gt(@get(value.master),0) @then
			@set(value.master,0)
			@incmoves
			@msg(message.1008)
		@else
			@msg(message.1005)
		@endif
	@else
		@msg(message.1003)
	@endif
command.28.46
	@comment("close book")
	@msg(message.1032)
command.28.47
	@comment("close door")
	@if @isroom(7) @then
		@goto(6)
		@set(value.lroom,0)
	@elseif @eq(@get(@concat("room.",@room,".door")),-2) @then
		@msg(message.1036)
	@elseif @eq(@get(@concat("room.",@room,".door")),-1) @then
		@msg(message.1025)
	@elseif @eq(@get(@concat("room.",@room,".door")),2) @then
		@set(@concat("room.",@room,".door"),1)
		@incmoves
		@msg(message.1008)
	@else
		@msg(message.1008)
	@endif
command.28.48
	@comment("close drawer")
	@if @isroom(1) @then
		@if @here(19) @then
			@set(item.19.location,0)
			@incmoves
		@endif
		@msg(message.1008)
	@else
		@msg(message.1003)
	@endif
command.29
	@comment("lock")
	@if @le(@room,25) @then
		@script(command.29.47)
	@else
		@msg(message.1016)
	@endif
command.29.47
	@comment("lock door")
	@if @isroom(21) @and @ge(@get(room.21.door),1) @then
		@set(room.21.door,0)
		@set(value.lock,0)
		@incmoves
		@msg(message.1019)
	@elseif @eq(@get(@concat("room.",@room,".door")),-1) @then
		@msg(message.1025)
	@elseif @eq(@get(@concat("room.",@room,".door")),-2) @then
		@msg(message.1036)
	@elseif @ge(@get(@concat("room.",@room,".door")),1) @then
		@if @carry(4) @then
			@set(@concat("room.",@room,".door"),0)
			@incmoves
			@msg(message.1019)
		@else
			@msg(message.1067)
		@endif
	@else
		@msg(message.1149)
	@endif
command.30
	@comment("unlock -> unlock door")
	@if @le(@room,25) @then
		@script(command.30.47)
	@else
		@msg(message.1016)
	@endif
command.30.47
	@comment("unlock door")
	@if @isroom(21) @then
		@msg(message.1068)
	@elseif @eq(@get(@concat("room.",@room,".door")),-1) @then
		@msg(message.1025)
	@elseif @eq(@get(@concat("room.",@room,".door")),-2) @then
		@msg(message.1036)
	@elseif @eq(@get(@concat("room.",@room,".door")),0) @then
		@if @carry(4) @then
			@set(@concat("room.",@room,".door"),1)
			@incmoves
			@msg(message.1008)
		@else
			@msg(message.1067)
		@endif
	@elseif @eq(@get(@concat("room.",@room,".door")),1) @then
		@msg(message.1148)
	@else
		@msg(message.1020)
	@endif
command.31
	@comment("on -> light lamp")
	@script(command.32.21)
command.31.21
	@comment("on lamp -> light lamp")
	@script(command.32.21)
command.32.13
	@comment("light torch")
	@if @carry(13) @then
		@if @carry(15) @and @eq(@get(value.match),1) @then
			@set(value.torch,true)
			@incmoves
			@msg(message.1121)
		@else
			@msg(message.1075)
		@endif
	@else
		@msg(message.1003)
	@endif
command.32.15
	@comment("light match")
	@if @carry(15) @then
		@if @eq(@get(value.match),0) @then
			@set(temp.olddark,@dark)
			@set(value.match,1)
			@incmoves
			@msg(message.1038)
			@if @true(@get(temp.olddark)) @then
				@look
			@endif
		@else
			@msg(message.1008)
		@endif
	@else
		@msg(message.1003)
	@endif
command.32.21
	@comment("light lamp")
	@if @herecarry(21) @then
		@if @eq(@get(value.lamp),3) @then
			@msg(message.1009)
		@else
			@set(temp.olddark,@dark)
			@set(value.lamp,1)
			@if @gt(@get(value.lmove),@get(value.lampdim)) @then
				@set(value.lamp,2)
				@msg(message.1038)
			@endif
			@incmoves
			@if @true(@get(temp.olddark)) @then
				@look
			@elseif @eq(@get(value.lamp),1) @then
				@msg(message.1008)
			@endif
		@endif
	@else
		@msg(message.1003)
	@endif
command.32.27
	@comment("light cigar")
	@if @carry(15) @and @eq(@get(value.match),1) @then
		@if @isroom(86) @and @false(@get(value.hole)) @then
			@if @itemloc(27,-3) @then
				@sendto(27,0)
				@set(value.hole,true)
				@incmoves
				@msg(message.1120)
				@msg(message.1117)
			@else
				@msg(message.1002)
			@endif
		@elseif @carry(27) @then
			@incmoves
			@msg(message.died.7004)
			@dead
		@else
			@msg(message.1003)
		@endif
	@else
		@msg(message.1075)
	@endif
command.33
	@comment("off -> extinguish lamp")
	@script(command.34.21)
command.33.13
	@comment("off torch -> extinguish torch")
	@script(command.34.13)
command.33.15
	@comment("off match -> extinguish match")
	@script(command.34.15)
command.33.21
	@comment("off lamp -> extinguish lamp")
	@script(command.34.21)
command.34.13
	@comment("extinguish torch")
	@if @herecarry(13) @then
		@if @true(@get(value.torch)) @then
			@set(value.torch,false)
			@incmoves
			@msg(message.1008)
		@else
			@msg(message.1008)
		@endif
	@else
		@msg(message.1003)
	@endif
command.34.15
	@comment("extinguish match")
	@if @herecarry(15) @then
		@if @eq(@get(value.match),1) @then
			@set(value.match,0)
			@incmoves
			@msg(message.1037)
			@if @dark @then
				@msg(message.1064)
			@endif
		@else
			@msg(message.1008)
		@endif
	@else
		@msg(message.1003)
	@endif
command.34.21
	@comment("extinguish lamp")
	@if @herecarry(21) @then
		@if @gt(@get(value.lamp),0) @and @lt(@get(value.lamp),3) @then
			@set(value.lamp,0)
			@incmoves
			@msg(message.1037)
			@if @dark @then
				@msg(message.1064)
			@endif
		@else
			@msg(message.1037)
		@endif
	@else
		@msg(message.1003)
	@endif
command.34.34
	@comment("extinguish fire")
	@if @isroom(47) @and @true(@get(value.fire)) @then
		@if @carry(26) @then
			@sendto(26,0)
			@sendto(18,@inv)
			@set(value.bottle,false)
			@set(value.water,false)
			@set(value.fire,false)
			@incmoves
			@msg(message.1103)
		@else
			@msg(message.1102)
		@endif
	@else
		@msg(message.1003)
	@endif
command.35
	@comment("look")
	@lookfull
command.36
	@comment("score")
	@script(script.score)
command.37.*
	@comment("break something")
	@msg(message.1084)
command.37.37
	@comment("break window")
	@if @isroom(1) @then
		@if @eq(@get(value.shuttr),0) @then
			@msg(message.des.417)
		@elseif @eq(@get(value.wind1),0) @then
			@set(value.wind1,1)
			@incmoves
			@msg(message.1008)
		@else
			@msg(message.1046)
		@endif
	@elseif @isroom(10) @then
		@if @eq(@get(value.wind2),0) @then
			@set(value.wind2,3)
			@incmoves
			@msg(message.1008)
		@else
			@msg(message.1046)
		@endif
	@else
		@msg(message.1003)
	@endif
command.37.47
	@comment("break door")
	@if @carry(3) @and @isroom(99) @then
		@set(value.masect,true)
		@incmoves
		@msg(message.1136)
	@else
		@msg(message.1084)
	@endif
command.37.50
	@comment("break mirror")
	@if @isroom(55) @then
		@msg(message.1111)
	@elseif @isroom(27) @then
		@incmoves
		@msg(message.1048)
		@dead
	@elseif @isroom(17) @and @eq(@get(value.ipass),0) @then
		@set(value.ipass,1)
		@addscore(10)
		@incmoves
		@msg(message.des.412)
	@else
		@msg(message.1003)
	@endif
command.37.56
	@comment("break board")
	@if @isroom(6) @then
		@if @herecarry(3) @then
			@if @eq(@get(room.6.door),0) @then
				@set(room.6.door,1)
				@incmoves
				@msg(message.1041)
			@else
				@msg(message.1003)
			@endif
		@else
			@msg(message.1039)
			@setoutchannel("#ASK;")
			@setoutchannel("@script(script.break_board_hand)")
		@endif
	@else
		@msg(message.1003)
	@endif
command.38
	@comment("water -> pour")
	@script(command.39)
command.38.*
	@comment("water something -> pour something")
	@script(@concat("command.39.",@get(input.noun)))
command.39
	@comment("pour")
	@msg(message.1005)
command.39.*
	@comment("pour something")
	@msg(message.1005)
command.39.1
	@comment("pour kerosene -> fill lamp")
	@script(command.49.21)
command.39.5
	@comment("pour blood -> drop blood")
	@script(command.12.5)
command.39.7
	@comment("pour champagne")
	@if @carry(7) @then
		@msg(message.1104)
	@else
		@msg(message.1003)
	@endif
command.39.25
	@comment("pour acid")
	@if @carry(25) @then
		@incmoves
		@msg(message.1063)
		@script(script.lost_acid)
	@else
		@msg(message.1003)
	@endif
command.39.26
	@comment("pour water -> drop water")
	@script(command.12.26)
command.40
	@comment("back")
	@if @gt(@get(value.lroom),0) @then
		@set(temp.lroom,@room)
		@goto(@get(value.lroom))
		@set(value.lroom,@get(temp.lroom))
	@else
		@msg(message.1035)
	@endif
command.41
	@comment("swim")
	@if @isroom(32) @or @isroom(68) @or @isroom(81) @or @isroom(40) @then
		@msg(message.1076)
	@else
		@msg(message.1013)
	@endif
command.42.*
	@comment("melt something")
	@msg(message.1016)
command.42.79
	@comment("melt ice")
	@if @isroom(65) @then
		@if @carry(13) @and @true(@get(value.torch)) @then
			@if @false(@get(value.melt)) @then
				@set(value.melt,true)
				@incmoves
				@msg(message.1116)
				@if @false(@get(value.water)) @then
					@drop(26)
					@msg(item.26.longdesc)
				@endif
			@else
				@incmoves
				@msg(message.1144)
				@dead
			@endif
		@else
			@msg(message.1005)
		@endif
	@else
		@msg(message.1003)
	@endif
command.43
	@comment("cross")
	@if @carry(14) @then
		@if @isroom(32) @then
			@goto(40)
			@set(value.lroom,0)
		@elseif @isroom(40) @then
			@goto(32)
			@set(value.lroom,0)
		@elseif @isroom(68) @then
			@goto(81)
			@set(value.lroom,0)
		@elseif @isroom(81) @then
			@goto(68)
			@set(value.lroom,0)
		@else
			@msg(message.1013)
		@endif
	@else
		@msg(message.1082)
	@endif
command.43.26
	@comment("cross water")
	@script(command.43)
command.43.51
	@comment("cross moat")
	@if @isroom(32) @or @isroom(40) @then
		@script(command.43)
	@else
		@msg(message.1013)
	@endif
command.44
	@comment("quit")
	@script(script.gameover)
command.45
	@comment("honk")
	@if @isroom(99) @then
		@if @true(@get(value.mas1)) @then
			@addscore(2)
		@endif
		@if @true(@get(value.mas2)) @then
			@addscore(1)
		@endif
		@if @true(@get(value.mas3)) @then
			@addscore(1)
		@endif
		@if @true(@get(value.mas4)) @then
			@addscore(1)
		@endif
		@goto(100)
	@elseif @isroom(95) @or @isroom(97) @then
		@set(value.ndeath,3)
		@incmoves
		@msg(message.1142)
		@dead
	@elseif @isroom(96) @or @isroom(98) @then
		@set(value.ndeath,3)
		@incmoves
		@msg(message.1143)
		@dead
	@else
		@msg(message.1095)
	@endif
command.46.9
	@comment("tie rope")
	@if @carry(9) @then
		@if @isroom(1) @and @eq(@get(value.rope),0) @then
			@comment("modification: orig shows two rope msgs")
			@comment("should be: @sendto(9,-3)")
			@sendto(9,1)
			@set(value.rope,1)
			@incmoves
			@msg(message.1069)
		@elseif @carry(16) @then
			@set(value.rope,3)
			@incmoves
			@msg(message.1010)
		@else
			@msg(message.1013)
		@endif
	@else
		@msg(message.1003)
	@endif
command.46.16
	@comment("tie hook")
	@if @carry(16) @then
		@if @carry(9) @then
			@set(value.rope,3)
			@incmoves
			@msg(message.1010)
		@else
			@msg(message.1013)
		@endif
	@else
		@msg(message.1003)
	@endif
command.47.9
	@comment("untie rope")
	@if @eq(@get(value.rope),3) @then
		@if @herecarry(9) @and @herecarry(16) @then
			@if @true(@get(value.prec)) @then
				@set(value.prec,false)
				@set(value.rope,0)
				@sendto(9,83)
				@incmoves
				@msg(message.1150)
			@else
				@set(value.rope,0)
				@incmoves
				@msg(message.1008)
			@endif
		@else
			@msg(message.1003)
		@endif
	@elseif @isroom(1) @and @here(9) @then
		@if @eq(@get(value.rope),1) @then
			@set(value.rope,0)
			@incmoves
			@msg(message.1008)
		@elseif @eq(@get(value.rope),2) @then
			@set(value.rope,0)
			@sendto(9,29)
			@incmoves
			@msg(message.1071)
			@script(script.lost_rope)
		@endif
	@else
		@msg(message.1003)
	@endif
command.47.16
	@comment("untie hook")
	@if @eq(@get(value.rope),3) @then
		@if @herecarry(9) @and @herecarry(16) @then
			@if @true(@get(value.prec)) @then
				@set(value.prec,false)
				@set(value.rope,0)
				@sendto(9,83)
				@incmoves
				@msg(message.1150)
			@else
				@set(value.rope,0)
				@incmoves
				@msg(message.1008)
			@endif
		@else
			@msg(message.1003)
		@endif
	@else
		@msg(message.1003)
	@endif
command.48.46
	@comment("read book")
	@if @isroom(10) @or @isroom(13) @then
		@msg(message.1028)
	@else
		@msg(message.1003)
	@endif
command.48.52
	@comment("read note")
	@if @isroom(8) @and @eq(@get(value.but),2) @then
		@addscore(@get(value.butval))
		@set(value.butval,0)
		@if @eq(@get(value.note),0) @and @itemloc(4,-3) @then
			@set(value.but,0)
			@set(value.note,1)
			@incmoves
			@msg(message.1029)
		@else
			@set(value.but,3)
			@set(value.note,2)
			@incmoves
			@msg(message.1030)
		@endif
	@else
		@msg(message.1003)
	@endif
command.49.*
	@comment("fill something")
	@msg(message.1002)
command.49.18
	@comment("fill bottle")
	@if @carry(18) @then
		@if @true(@get(value.bottle)) @then
			@msg(message.1099)
		@elseif @isroom(32) @or @isroom(40) @or @isroom(68) @or @isroom(81) @or @here(26) @then
			@script(command.11.26)
		@elseif @here(5) @then
			@script(command.11.5)
		@else
			@msg(message.1005)
		@endif
	@else
		@msg(message.1004)
	@endif
command.49.21
	@comment("fill lamp")
	@if @carry(21) @and @carry(1) @then
		@if @eq(@get(value.lamp),2) @then
			@set(value.lamp,1)
		@elseif @eq(@get(value.lamp),3) @then
			@set(value.lamp,0)
		@endif
		@sendto(1,0)
		@set(value.lmove,0)
		@incmoves
		@msg(message.1008)
	@else
		@msg(message.1005)
	@endif
command.50
	@comment("hint (room)")
	@script(script.want_room_hint)
command.50.*
	@comment("hint something")
	@script(script.want_item_hint)
command.50.45
	@comment("hint room")
	@script(script.want_room_hint)
command.52
	@comment("left")
	@msg(message.1013)
command.52.*
	@comment("left something")
	@msg(message.1013)
command.52.#
	@comment("left number")
	@if @isroom(21) @then
		@set(temp.error,true)
		@if @eq(@get(value.lock),3) @then
			@msg(message.1147)
			@set(temp.error,false)
		@elseif @eq(@get(input.nounword),8) @then
			@if @eq(@get(value.lock),0) @then
				@set(value.lock,1)
				@incmoves
				@msg(message.1008)
				@set(temp.error,false)
			@endif
		@elseif @eq(@get(input.nounword),59) @then
			@if @eq(@get(value.lock),2) @then
				@set(value.lock,3)
				@addscore(@get(value.lokval))
				@set(value.locval,0)
				@set(room.21.door,1)
				@incmoves
				@msg(message.1015)
				@set(temp.error,false)
			@endif
		@endif
		@if @true(@get(temp.error)) @then
			@set(value.lock,0)
			@incmoves
			@msg(message.1014)
		@endif
	@else
		@msg(message.1013)
	@endif
command.53
	@comment("right")
	@msg(message.1013)
command.53.*
	@comment("right something")
	@msg(message.1013)
command.53.#
	@comment("right number")
	@if @isroom(21) @then
		@set(temp.error,true)
		@if @eq(@get(value.lock),3) @then
			@msg(message.1147)
			@set(temp.error,false)
		@elseif @eq(@get(input.nounword),31) @then
			@if @eq(@get(value.lock),1) @then
				@set(value.lock,2)
				@incmoves
				@msg(message.1008)
				@set(temp.error,false)
			@endif
		@endif
		@if @true(@get(temp.error)) @then
			@set(value.lock,0)
			@incmoves
			@msg(message.1014)
		@endif
	@else
		@msg(message.1013)
	@endif
command.54
	@comment("shoot -> shoot gun")
	@script(command.54.20)
command.54.*
	@comment("shoot something")
	@msg(message.1057)
command.54.8
	@comment("shoot hunchback")
	@if @herecarry(8) @then
		@if @carry(20) @then
			@if @true(@get(value.gun)) @then
				@set(value.gun,false)
				@sendto(8,0)
				@sendto(2,0)
				@set(value.hunch,2)
				@incmoves
				@msg(message.1056)
			@else
				@msg(message.1054)
			@endif
		@else
			@msg(message.1005)
		@endif
	@else
		@msg(message.1003)
	@endif
command.54.20
	@comment("shoot gun")
	@if @carry(20) @then
		@if @true(@get(value.gun)) @then
			@if @true(@get(value.wolf)) @then
				@script(command.54.76)
			@elseif @true(@get(value.gnome)) @then
				@script(command.54.77)
			@elseif @herecarry(8) @then
				@script(command.54.8)
			@elseif @isroom(8) @then
				@script(command.54.49)
			@elseif @isroom(20) @then
				@script(command.54.55)
			@elseif @isroom(86) @then
				@script(command.54.78)
			@elseif @isroom(93) @then
				@script(command.54.80)
			@else
				@msg(message.1057)
			@endif
		@else
			@msg(message.1054)
		@endif
	@else
		@msg(message.1004)
	@endif
command.54.49
	@comment("shoot butler")
	@if @isroom(8) @and @lt(@get(value.but),4) @then
		@if @carry(20) @then
			@if @true(@get(value.gun)) @then
				@set(value.gun,false)
				@sendto(2,0)
				@set(value.but,4)
				@incmoves
				@msg(message.1055)
			@else
				@msg(message.1054)
			@endif
		@else
			@msg(message.1005)
		@endif
	@else
		@msg(message.1003)
	@endif
command.54.55
	@comment("shoot bat")
	@if @isroom(20) @and @true(@get(value.bat)) @then
		@if @carry(20) @then
			@if @true(@get(value.gun)) @then
				@set(value.gun,false)
				@drop(2)
				@incmoves
				@msg(message.1058)
				@msg(item.2.longdesc)
			@else
				@msg(message.1054)
			@endif
		@else
			@msg(message.1005)
		@endif
	@else
		@msg(message.1003)
	@endif
command.54.76
	@comment("shoot wolf")
	@script(script.shoot_wolf)
command.54.77
	@comment("shoot gnome")
	@if @true(@get(value.gnome)) @then
		@if @carry(20) @then
			@if @true(@get(value.gun)) @then
				@set(value.gun,false)
				@if @rand(80) @then
					@set(value.gnome,false)
					@sendto(2,44)
					@incmoves
					@msg(message.1108)
				@else
					@drop(2)
					@incmoves
					@msg(message.1109)
					@msg(item.2.longdesc)
				@endif
			@else
				@msg(message.1054)
			@endif
		@else
			@msg(message.1005)
		@endif
	@else
		@msg(message.1003)
	@endif
command.54.78
	@comment("shoot cyclops")
	@if @isroom(86) @and @false(@get(value.hole)) @then
		@if @carry(20) @then
			@if @true(@get(value.gun)) @then
				@set(value.gun,false)
				@sendto(2,0)
				@incmoves
				@msg(message.1126)
				@msg(item.2.longdesc)
			@else
				@msg(message.1054)
			@endif
		@else
			@msg(message.1005)
		@endif
	@else
		@msg(message.1003)
	@endif
command.54.80
	@comment("shoot wizard")
	@if @isroom(93) @and @true(@get(value.wiz)) @then
		@if @carry(20) @then
			@if @true(@get(value.gun)) @then
				@msg(message.1095)
			@else
				@msg(message.1054)
			@endif
		@else
			@msg(message.1005)
		@endif
	@else
		@msg(message.1003)
	@endif
command.55.39
	@comment("wake count")
	@if @isroom(43) @then
		@if @gt(@get(value.master),0) @and @lt(@get(value.master),4) @then
			@set(value.master,3)
			@incmoves
			@msg(message.des.426)
		@else
			@msg(message.1005)
		@endif
	@else
		@msg(message.1003)
	@endif
command.55.49
	@comment("wake butler")
	@if @isroom(8) @then
		@if @ge(@get(value.but),3) @then
			@msg(message.1044)
		@else
			@set(value.but,1)
			@script(script.check_butler_note)
			@incmoves
		@endif
		@msg(@concat("message.des.",@add(@get(value.but),400)))
	@else
		@msg(message.1003)
	@endif
command.56
	@comment("poof!")
	@if @isroom(15) @or @isroom(56) @then
		@if @ne(@get(room.2.door),0) @then
			@if @carry(8) @then
				@sendto(8,57)
			@endif
			@if @carry(14) @then
				@drop(14)
			@endif
			@if @isroom(15) @then
				@goto(56)
			@else
				@set(room.15.visited,false)
				@goto(15)
			@endif
			@set(value.lastroom,0)
		@else
			@msg(message.1095)
		@endif
	@else
		@msg(message.1095)
	@endif
command.57
	@comment("save")
	@setoutchannel("#SAVE;")
	@setoutchannel("@msg(message.1008)")
command.58
	@comment("restore")
	@setoutchannel("#RESTORE;")
	@setoutchannel("@msg(message.1008)")
	@setoutchannel("@lookfull")
command.60
	@comment("verbose")
	@set(value.ibrief,0)
	@msg(message.1008)
command.61
	@comment("brief")
	@set(value.ibrief,1)
	@msg(message.1073)
__config.autorunprefix
	background.
__config.commandprefix
	command.
__config.directionprefix
	direction.
__config.itemlongdesc
	item.{0}.longdesc
__config.itemprefix
	item.{0}.
__config.itemshortdesc
	item.{0}.shortdesc
__config.messageprefix
	message.
__config.nounprefix
	noun.
__config.prepositionprefix
	preposition.
__config.roomexitdirection
	room.{0}.exit.{1}
__config.roomlongdesc
	room.{0}.longdesc
__config.roomprefix
	room.{0}.
__config.roomshortdesc
	room.{0}.shortdesc
__config.scriptprefix
	script.
__config.systemprefix
	system.
__config.valueprefix
	value.
__config.verbprefix
	verb.
item.1.hint
	@comment("kerosene")
	@set(temp.hint,@get(message.hint.29))
item.1.location
	25
item.1.longdesc
	\n  There is a can of kerosene here.
item.1.shortdesc
	Kerosene
item.2.afterdrop
	@if @true(@get(value.gun)) @then
		@set(value.gun,false)
	@endif
item.2.hint
	@comment("bullet")
	@set(temp.hint,@get(message.hint.1))
item.2.location
	1
item.2.longdesc
	\n  There is a silver bullet here.
item.2.shortdesc
	Silver bullet
item.3.location
	33
item.3.longdesc
	\n  There is a blood stained hatchet here.
item.3.shortdesc
	Bloody hatchet
item.4.location
	-3
item.4.longdesc
	\n  There is an ornate skeleton key here!
item.4.shortdesc
	Skeleton key
item.4.treasurevalue
	9
item.5.afterdrop
	@set(value.blood,false)
	@set(value.bottle,false)
	@drop(18)
item.5.location
	18
item.5.longdesc
	\n  There is a small pool of blood here.
item.5.shortdesc
	Blood in bottle
item.6.hint
	@comment("stake")
	@set(temp.hint,@get(message.hint.2))
item.6.location
	12
item.6.longdesc
	\n  To one side lies a wooden stake.
item.6.shortdesc
	Wooden stake
item.7.findvalue
	10
item.7.location
	55
item.7.longdesc
	\n  There is a bottle of vintage champagne here!
item.7.shortdesc
	Champagne
item.7.treasurevalue
	10
item.8.hint
	@comment("hunchback")
	@set(temp.hint,@get(message.hint.3))
item.8.location
	35
item.8.longdesc
	\n  A nasty hunchback eyes you from a corner of the room.
item.8.shortdesc
	Hunchback
item.9.afterdrop
	@if @eq(@get(value.rope),3) @then
		@drop(16)
		@if @isroom(84) @then
			@set(value.prec,true)
			@msg(message.1011)
		@else
			@set(value.rope,0)
			@msg(message.1112)
		@endif
	@endif
item.9.hint
	@comment("rope")
	@set(temp.hint,@get(message.hint.4))
item.9.location
	19
item.9.longdesc
	\n  There is a long piece of rope lying on the floor.
item.9.shortdesc
	Coil of rope
item.10.afterdrop
	@if @isroom(8) @and @eq(@get(value.but),1) @then
		@script(script.check_butler_note)
		@if @eq(@get(value.but),2) @then
			@msg(@concat("message.des.",@add(@get(value.but),400)))
		@else
			@msg(message.1008)
		@endif
	@else
		@msg(message.1008)
	@endif
item.10.hint
	@comment("paper")
	@set(temp.hint,@get(message.hint.5))
item.10.location
	3
item.10.longdesc
	\n  There is some "HORROR HOTEL" writing paper here.
item.10.shortdesc
	Writing paper
item.11.afterdrop
	@if @isroom(8) @and @eq(@get(value.but),1) @then
		@script(script.check_butler_note)
		@if @eq(@get(value.but),2) @then
			@msg(@concat("message.des.",@add(@get(value.but),400)))
		@else
			@msg(message.1008)
		@endif
	@else
		@msg(message.1008)
	@endif
item.11.hint
	@comment("pen")
	@set(temp.hint,@get(message.hint.5))
item.11.location
	15
item.11.longdesc
	\n  There is an old quill pen here.
item.11.shortdesc
	Quill pen
item.12.findvalue
	10
item.12.location
	88
item.12.longdesc
	\n  There is an ivory-handled sword here!
item.12.shortdesc
	Ivory sword
item.12.treasurevalue
	10
item.13.hint
	@comment("torch")
	@set(temp.hint,@get(message.hint.25))
item.13.location
	36
item.13.longdesc
	\n  There is a rusty acetylene torch here.
item.13.shortdesc
	Acetylene torch
item.14.location
	32
item.14.longdesc
	\n  Off to the side is an old rowboat.
item.14.shortdesc
	Rowboat
item.15.location
	13
item.15.longdesc
	\n  There are matches from the Vampire Diner here.
item.15.shortdesc
	Reusable match
item.16.afterdrop
	@if @eq(@get(value.rope),3) @then
		@drop(9)
		@if @isroom(84) @then
			@set(value.prec,true)
			@msg(message.1011)
		@else
			@set(value.rope,0)
			@msg(message.1112)
		@endif
	@endif
item.16.hint
	@comment("hook")
	@set(temp.hint,@get(message.hint.26))
item.16.location
	11
item.16.longdesc
	\n  There is a heavy steel grappling hook here.
item.16.shortdesc
	Grappling Hook
item.17.findvalue
	20
item.17.location
	29
item.17.longdesc
	\n  A gold statue is glistening in the light!
item.17.shortdesc
	Gold statue
item.17.treasurevalue
	10
item.18.afterdrop
	@if @true(@get(value.bottle)) @then
		@if @true(@get(value.blood)) @then
			@set(value.blood,false)
			@drop(5)
		@elseif @true(@get(value.water)) @then
			@set(value.water,false)
			@drop(26)
		@endif
		@set(value.bottle,false)
	@endif
item.18.hint
	@comment("bottle")
	@set(temp.hint,@get(message.hint.6))
item.18.location
	31
item.18.longdesc
	\n  An empty bottle is discarded nearby.
item.18.shortdesc
	Empty bottle
item.18.treasurevalue
	1
item.19.findvalue
	25
item.19.hint
	@comment("cross")
	@set(temp.hint,@get(message.hint.7))
item.19.location
	0
item.19.longdesc
	\n  There is a silver cross nearby!
item.19.shortdesc
	Silver cross
item.19.treasurevalue
	10
item.20.afterdrop
	@if @true(@get(value.gun)) @then
		@set(value.gun,false)
		@drop(2)
	@endif
item.20.location
	3
item.20.longdesc
	@if @false(@get(value.gun)) @then
		@write("\n  There is an old gun here.")
	@else
		@write("\n  There is an old gun loaded with a silver bullet.")
	@endif
item.20.shortdesc
	@if @false(@get(value.gun)) @then
		@write("Old gun")
	@else
		@write("Bullet in gun")
	@endif
item.21.location
	22
item.21.longdesc
	\n  There is a small kerosene lamp here.
item.21.shortdesc
	Brass lantern
item.22.location
	6
item.22.longdesc
	\n  Somebody left some tasty food here.
item.22.shortdesc
	Tasty food
item.23.findvalue
	10
item.23.location
	81
item.23.longdesc
	\n  There is a very large ruby here!
item.23.shortdesc
	Large ruby
item.23.treasurevalue
	10
item.24.findvalue
	10
item.24.location
	52
item.24.longdesc
	\n  Perched on the ground is a valuable jade figure!
item.24.shortdesc
	Jade figure
item.24.treasurevalue
	10
item.25.hint
	@comment("acid")
	@set(temp.hint,@get(message.hint.8))
item.25.location
	14
item.25.longdesc
	\n  There is a small flask of nitric acid here.
item.25.shortdesc
	Flask of acid
item.26.afterdrop
	@set(value.water,false)
	@set(value.bottle,false)
	@drop(18)
item.26.hint
	@comment("water")
	@set(temp.hint,@get(message.hint.9))
item.26.location
	0
item.26.longdesc
	\n  You are standing in a small puddle of water.
item.26.shortdesc
	Water in bottle
item.27.hint
	@comment("cigar")
	@set(temp.hint,@get(message.hint.10))
item.27.location
	10
item.27.longdesc
	\n  There is a fine cuban cigar here.
item.27.shortdesc
	Cuban cigar
item.28.findvalue
	10
item.28.location
	77
item.28.longdesc
	\n  A sapphire sparkles on the ground nearby!
item.28.shortdesc
	Sapphire
item.28.treasurevalue
	10
item.29.findvalue
	10
item.29.location
	94
item.29.longdesc
	\n  There is lots of money here!
item.29.shortdesc
	Lots of money
item.29.treasurevalue
	10
item.30.findvalue
	10
item.30.location
	89
item.30.longdesc
	\n  A delicate crystal swan lies off to one side!
item.30.shortdesc
	Crystal swan
item.30.treasurevalue
	10
item.37.hint
	@comment("window")
	@set(temp.hint,@get(message.hint.12))
item.39.hint
	@comment("master")
	@set(temp.hint,@get(message.hint.13))
item.46.hint
	@comment("book")
	@set(temp.hint,@get(message.hint.14))
item.48.hint
	@comment("drawer")
	@set(temp.hint,@get(message.hint.15))
item.49.hint
	@comment("butler")
	@set(temp.hint,@get(message.hint.16))
item.50.hint
	@comment("mirror")
	@set(temp.hint,@get(message.hint.17))
item.54.hint
	@comment("bars")
	@set(temp.hint,@get(message.hint.18))
item.55.hint
	@comment("bat")
	@set(temp.hint,@get(message.hint.19))
item.56.hint
	@comment("board")
	@set(temp.hint,@get(message.hint.20))
item.76.hint
	@comment("wolf")
	@set(temp.hint,@get(message.hint.11))
item.77.hint
	@comment("gnome")
	@set(temp.hint,@get(message.hint.24))
item.78.hint
	@comment("cyclops")
	@set(temp.hint,@get(message.hint.23))
item.79.hint
	@comment("glacier")
	@set(temp.hint,@get(message.hint.27))
item.80.hint
	@comment("wizard")
	@set(temp.hint,@get(message.hint.28))
message.1001
	\s Welcome to CASTLEQUEST!! Would you like instructions?
message.1002
	\n  That would be a neat trick.
message.1003
	\n  I don't see that here.
message.1004
	\n  You don't have it with you.
message.1005
	\n  I don't think I can do that.
message.1006
	\n  There is no way to go in that direction.
message.1007
	\n  Load the gun with what?
message.1008
	\n  OK
message.1009
	\n  The lantern seems to be out of fluid.
message.1010
	\n  The rope is tied securely to the grappling hook.
message.1011
	\n  A rope is hooked to the top of the precipice.
message.1012
	\n  You can't carry anything else.
message.1013
	\n  I don't know how to apply that here.
message.1014
	\n  You blew it. I think you'd better start over.
message.1015
	\n  The lock is now open.
message.1016
	\n  You can't be serious.
message.1017
	\n  YUMMY! That was good.
message.1018
	\n  GLUG GLUG GLUG GLUG BELCH!!
message.1019
	\n  The door is locked.
message.1020
	\n  The door is already open.
message.1021
	\n  The door is boarded up.
message.1022
	\n  The shutter is open, but there are bars over the window.
message.1023
	\n  The window is nailed shut.
message.1024
	\n  There is a silver cross in the drawer!
message.1025
	\n  I see no door here.
message.1026
	\n  It wouldn't be much of a lock if you could just open it.
message.1027
	\n  A skeleton key falls out of the book.
message.1028
	\n  A literary classic, but we don't have time to read.
message.1029
	\n  "The master loves Shakespeare".
message.1030
	\n  "Look behind the mirror."
message.1031
	\n  You can't close a broken window.
message.1032
	\n  I never liked classics, anyway.
message.1033
	\n  Sorry, but you don't have your library card.
message.1034
	\n  The butler is lame, and could not keep up with you.
message.1035
	\n  You can't get back the way you came.
message.1036
	\n  The door will neither open nor close.
message.1037
	\n  The light is out.
message.1038
	\n  The light is burning dimly.
message.1039
	\n  With what??  Your bare hands??
message.1040
	\n  You just broke every bone in your hand.\n  You might try an axe or something....
message.1041
	\n  The door can now be opened.
message.1042
	\n  The door is closed.
message.1043
	\n  You have fallen through a trap door and find...
message.1044
	\n  The butler cannot be aroused.
message.1045
	\n  Take note of what??
message.1046
	\n  The window IS already broken.
message.1047
	\n  You had better watch your mouth.
message.1048
	\n  The mirrors shatter in an explosion of flying glass.
message.1049
	\n  A huge vampire bat hangs from the doorframe and blocks your way.
message.1050
	\n  Feed the bat with what??
message.1051
	\n  The bat gulps down the blood and flitters away.
message.1052
	\n  Bats don't eat food, they eat blood.  Like yours.
message.1053
	\n  You killed a werewolf.  An old gypsy woman\n  appears and drags away the body.
message.1054
	\n  Unfortunately the gun is not loaded.
message.1055
	\n  You killed a deaf-mute butler (Not very sporting of you).
message.1056
	\n  You just murdered an innocent hunchback.
message.1057
	\n  There is nothing here to shoot.
message.1058
	\n  The bullet does not penetrate the bat's thick hide.
message.1059
	\n  You swan dive off the tower and drown in the moat.
message.1060
	\n  You don't have the sword with you.
message.1061
	\n  The acid dissolves the bars.  The window is clear.
message.1062
	\n  The werewolf howls in pain and runs away.
message.1063
	\n  The acid has burned a hole in the floor.
message.1064
	\n  It is now pitch dark. If you procede you may stumble and fall.
message.1065
	\n  Your bullet misses.
message.1066
	\n  A combination lock bars the door.
message.1067
	\n  I'm afraid you don't have the key.
message.1068
	\n  Unless you're a safecracker, I suggest you use the combination.
message.1069
	\n  The rope is anchored securely to the bed.
message.1070
	\n  The rope is dangling out the window.
message.1071
	\n  The rope slithers out the window and falls out of reach.
message.1072
	\n  The rope is already out the window.
message.1073
	\n  OK, from now on I will give only short descriptions.
message.1074
	\n  You have nothing to carry it in.
message.1075
	\n  You have nothing to light it with.
message.1076
	\n  I hate to tell you this, but I can't swim.
message.1077
	\n  You fall in the dark and break your neck.
message.1078
	\n  You haven't any water.
message.1079
	\n  You bring it to the height of ecstasy.
message.1080
	\n  Jump from where??
message.1081
	\n  Something you're carrying won't fit into the house.
message.1082
	\n  You dont have a boat to cross in.
message.1083
	\n  You're lamp is getting dim.  Perhaps you\n  should look for more fuel.
message.1084
	\n  You are not strong enough to break it.
message.1085
	\n  I took the liberty of filling the lamp with kerosene.
message.1086
	\n  A vampire can only be killed with a wooden stake.
message.1087
	\n  The vampire clutches at the stake and dies,\n  leaving only a pile of dust.
message.1088
	\n  Your match has burnt out.
message.1089
	\n  You'd better hurry.  The sun is setting.
message.1090
	\n  The hunchback gobbles down the food and smiles at you.
message.1091
	\n  Werewolves eat only fresh meat.
message.1092
	\n  The butler is not allowed to eat.
message.1093
	\n  It's not a good idea to take a hungry hunchback.
message.1094
	\n  Count Vladimir clamps his fangs on your neck!!
message.1095
	\n  Nothing happens.
message.1096
	\n  You already have it.
message.1097
	\n  You don't have any food.
message.1098
	\n  A copy of Shakespeare's "HAMLET" lies on the desk.
message.1099
	\n  The bottle is already full.
message.1100
	\n  A wall of fire bars the way to the NE.
message.1101
	\n  You can't get through the fire.
message.1102
	\n  You don't have any water.
message.1103
	\n  The fire smoulders and goes out.
message.1104
	\n  I'm sorry.  I don't have a corkscrew.
message.1105
	\n  You plummet headlong into the crashing surf\n  and are *SPLATTERED* on the rocks below.
message.1107
	\n  The gnome is very nimble and dodges out of your reach.
message.1108
	\n  You killed a dirty little gnome.
message.1109
	\n  You missed him, JERK!!
message.1110
	\n  There is a large opening in the ground.
message.1111
	\n  It is out of reach.
message.1112
	\n  The grappling hook and the rope are lying on the ground.
message.1113
	\n  INDE--URP--GESTION !!!
message.1114
	\n  THAT IS A PRIVILEGED INSTRUCTION.
message.1115
	\n ROOM #---
message.1116
	\n  Some ice has melted, leaving a large hole.
message.1117
	\n  There is a cyclops-shaped hole in the door.
message.1118
	\n  There is a fairly large cyclops staring at you.
message.1119
	\n  The cyclops turns to you and says:\n     "Hey buddy!.  Got a light??"
message.1120
	\n  The cyclops chokes from the rancid tobacco, and\n  crashes through the door in search of water.
message.1121
	\n  The torch is burning noisily.
message.1122
	\n  The cyclops hurls you against the wall and chuckles quietly.
message.1123
	\n  The cyclops flings you across the room and laughs hysterically.
message.1124
	\n  Boy are you dumb!  A cyclops doesn't eat food.
message.1125
	\n  The door is way too heavy for you to move it.
message.1126
	\n  The cyclops does not even feel the impact of the bullet.
message.1127
	\n  Some magical power will not let you pass.
message.1128
	\n  A powerful wizard blocks your way with his staff.
message.1129
	\n  The wizard's eyes flare as he raises his staff.\n  His awesome magic prevents you from attacking.
message.1130
	\n  A note materializes on the wall which reads:
message.1131
	\n  EMERGENCY EXIT--The mirror maze will lead you\n  to the locked door.  The exit lies within.
message.1133
	\n  The wizard raises his staff.  You are blinded by a sudden explosion of light.
message.1134
	\n  The walls of the cavern tremble as you unleash the\n  terrible power contained in the sword.
message.1135
	\n  The wizard, sensing a stronger power than his own,\n  flees in a blinding flash and a cloud of smoke.
message.1136
	\n  There is a passable hole in the door.
message.1137
	\n  The letter "H" appears for an instant on the wall.
message.1138
	\n  A mystical voice says "OH".
message.1139
	\n  The letter "N" forms out of mist.
message.1140
	\n  A large "K" emerges from the floor.
message.1141
	\n  Your axe is trembling slightly.
message.1142
	\n  The ceiling begins to vibrate and crumbles,\n  crushing you under tons of concrete.
message.1143
	\n  The floor erupts violently, swallowing you in a sea of molten lava.
message.1144
	\n  The glacier begins to melt in a torrential flood,\n  and swallows you in a sea of icy cold water.
message.1145
	\n  I think I hear footsteps behind you.
message.1146
	\n  What do you want with a heavy, dead butler?
message.1147
	\n  The lock is already open.
message.1148
	\n  The door is already unlocked.
message.1149
	\n  The door is already locked.
message.1150
	\n  The rope slithers off the edge and falls out of reach.
message.7001
	\n  This qualifies you as a "CLASS A" MASTER!
message.7002
	\n  You are a MASTER at CASTLEQUEST.
message.7003
	\n  You receive an EXPERT rating for your effort.
message.7004
	\n  You rate as a NOVICE EXPLORER for this game.
message.7005
	\n  You are a GREENHORN at this game!!
message.7006
	\n  You don't deserve to WALK THE EARTH!!
message.9997
	\n  You scored {0} out of {1} points.
message.9998
	\n  You made {0} moves, and scored {1} points.
message.9999
	\n  THAT HAS NOT BEEN IMPLEMENTED YET.
message.carry.1000
	\n  You are carrying the following {0} objects:
message.carry.1010
	\n  You are carrying the following object:
message.carry.3000
	\n  You're not carrying anything.
message.des.400
	\n  The butler is sound asleep.
message.des.401
	\n  The butler is motioning that he wants to write you a note.
message.des.402
	\n  The butler is holding out a note.
message.des.403
	\n  The butler is sleeping once again.
message.des.404
	\n  The butler is lying in a heap on the floor.
message.des.405
	\n  The window is nailed shut.
message.des.406
	\n  The window is broken, but bars block your way.
message.des.407
	\n  The window is now open.
message.des.408
	\n  The window is open.
message.des.409
	\n  Your sword is glowing dimly.
message.des.410
	\n  Your sword is glowing very brightly.
message.des.411
	\n  Your sword is brilliantly lit.
message.des.412
	\n  A secret tunnel descends into darkness.
message.des.413
	\n  A rope hangs from the window.
message.des.414
	\n  The werewolf snarls as he wards off your attack.
message.des.415
	\n  The butler has a black belt and repels your attack.
message.des.416
	\n  Attack the bat??  That's gross.  I won't do it.
message.des.417
	\n  The shutters are closed.
message.des.418
	\n  Kill what, fool?
message.des.419
	\n  The blade does not penetrate the bat's thick hide.
message.des.420
	\n  Werewolves can only be killed with silver.
message.des.421
	\n  A smiling hunchback is following you.
message.des.422
	\n  You attack the hunchback and break his neck.
message.des.423
	\n  The coffin is closed.
message.des.424
	\n  The Count is asleep in the coffin.
message.des.425
	\n  The Count is frightened by the cross and cowers in the coffin.
message.des.426
	\n  The Count sits up and prepares for breakfast-namely you!
message.des.427
	\n  The vampire is gone for good (Ding Dong, the Count is dead).
message.des.428
	\n  Something on the ground outside is glistening brightly.
message.des.429
	\n  The hunchback drives away the werewolf and dies in the struggle.
message.died.7001
	\n  You leap through the open window and are\n  dashed into pieces on the rocks below.
message.died.7004
	\n  A thick black smoke fills the room, engulfing you in\n  lethal choking fumes (smoking is bad for your health).
message.died.7007
	\n  You leap into the pit and fall for hours.  You land\n  on some moist "undead" bodies and are eaten alive.
message.died.7010
	\n  My, My.  You seem to have bitten the dust.\n  I can attempt to reincarnate you, but I'm\n  not very good at it.  Should I try?
message.died.7013
	\n  You fall weightlessly through a thick mist.\n  Your head is spinning as you emerge and find...
message.died.7015
	\n  You seem to have died again.  I can try and\n  reincarnate you, but you're taxing my patience.\n  Would you like me to try??
message.died.7018
	\n  You float aimlessly through a green mist which\n  transcends time and space.  You regain your\n  senses and realize that ...
message.died.7021
	\n  You did it again, didn't you? I'm afraid that\n  all the mist has evaporated.  I'm so sorry,\n  but this means you are dead for good.
message.died.7024
	\n  You have fallen in the dark and broken your neck.
message.gnome.1001
	\n  There is an ugly little gnome in the room with you!
message.gnome.1002
	\n  IT GETS YOU!!
message.gnome.1003
	\n  It misses by an elf-hair!
message.gnome.1004
	\n  He shoots a poisoned dart at you!
message.hint.1
	\n  A werewolf can be killed with a silver bullet.
message.hint.2
	\n  A vampire can be killed with a wooden stake.
message.hint.3
	\n  A well fed hunchback is an asset in the castle.
message.hint.4
	\n  The rope can be used to climb out the bedroom window.
message.hint.5
	\n  The butler can write notes, if given the tools.
message.hint.6
	\n  The bottle can hold liquids, such as blood or water.
message.hint.7
	\n  The cross will immobilize the vampire.
message.hint.8
	\n  The acid will dissolve the bars over the window.
message.hint.9
	\n  Water will extinguish a troublesome fire.
message.hint.10
	\n  The surgeon general has warned you about smoking.
message.hint.11
	\n  The werewolf can be killed with a silver bullet.
message.hint.12
	\n  You can get out the window by dissolving the bars.
message.hint.13
	\n  The count can only be killed with a stake through the heart.
message.hint.14
	\n  Try opening the book by shakespeare.
message.hint.15
	\n  There's a surprise in the drawer.
message.hint.16
	\n  The butler can write notes if he has the proper tools.
message.hint.17
	\n  Try breaking the mirror in the single mirror chamber.
message.hint.18
	\n  Acid will dissolve the bars and clear the window.
message.hint.19
	\n  The bat will leave after it has been fed.
message.hint.20
	\n  You need an axe or something to break the boards.
message.hint.21
	\n  You'll have to get out of the maze on your own.
message.hint.22
	\n  I think there is something behind the ice.
message.hint.23
	\n  Try "smoking" him out.
message.hint.24
	\n  Gnomes are a problem, but you can "give" them the axe.
message.hint.25
	\n  The torch can generate a lot of heat (but not light).
message.hint.26
	\n  The hook is useful for scaling steep walls.
message.hint.27
	\n  Try thinking of some way to get through the ice.
message.hint.28
	\n  The wizard can be overcome by magic, not by force.
message.hint.29
	\n  Your lamp can operate on fossil fuels.
message.hint.30
	\n  You are in a remote castle somewhere in Eastern Europe.\n  I will be your eyes and hands.  Direct me with words such\n  as "LOOK", "TAKE", or "DROP".  To move, enter compass points\n  (N,NE,E,SE,S,SW,W,NW), UP, or DOWN.  To get a list of what\n  you are carrying, say "INVENTORY".  To save the current game\n  so it can be finished later say "SAVE".  Say "RESTORE" as\n  your first command to finish a game that had been saved.
message.hint.31
	\n  The object of the game is to find the master of the castle\n  and kill him, while accumulating as many treasures as possible.\n  You get maximum points for depositing the treasures in the\n  vault.  Notice that the descriptions of treasures have an\n  exclamation point.  Be wary, as many dangers await you in\n  in the castle.
message.hint.32
	\n  To supress the long room descriptions, type "BRIEF".  To\n  return to the long room descriptions, use the command "LONG".\n  "SCORE" will give you your present score in the game.  "HELP"\n  will give you a hint about an object in the room, but it will\n  cost you some points.  To end your explorations, say "QUIT".\n  Good luck. (you'll need it).
message.hint.33
	\n  To aid you in your travels, you may ask for a hint by\n  saying "HINT object", where "object" is the item that you\n  need help with (e.g. "HELP CROSS").  Saying "HELP ROOM"\n  will give you some help concerning the room you're in.
message.hint.1001
	\n  Would you like more detailed instructions?
message.hint.1002
	\n  Sorry, not available.
message.hint.1003
	\n  It will cost you five points.\n  Do you still want the hint?.
message.hours.1002
	\n  I'M SORRY, BUT THE CASTLE IS CLOSED RIGHT NOW.\n       CASTLE HOURS ARE :\n   MONDAY THRU FRIDAY-----21:00 TO 09:00\n   SAT. AND SUN.     -----ALL DAY\n  ONLY BARONS MAY PLAY AT THIS TIME.\n  ARE YOU A BARON???
message.hours.1003
	\s PROVE IT BY ENTERING THE SECRET WORD.
message.hours.1005
	\s THAT IS NOT THE SECRET WORD.  BYE BYE.
message.restore.3005
	\n  I can't do that at this point in time.
message.wolf.1001
	\n  There is a fearsome werewolf in the room with you!
message.wolf.1002
	\n  The werewolf attacks you with its sharp claw!
message.wolf.1003
	\n  It severs your jugular vein and mortally wounds you!
message.wolf.1004
	\n  It just misses your neck!
message.wolf.1005
	\n  A nasty werewolf lunges at you, takes a swipe at\n  your neck, misses and runs away.
message.yorn.2001
	\n  Please answer YES or NO !
noun.1
	KERO,OIL
noun.2
	BULL
noun.3
	AXE,HATC
noun.4
	KEY
noun.5
	BLOO
noun.6
	STAK
noun.7
	CHAM
noun.8
	HUNC
noun.9
	ROPE
noun.10
	PAPE
noun.11
	PEN,QUIL
noun.12
	IVOR,SWOR
noun.13
	TORC
noun.14
	BOAT,ROWB
noun.15
	MATC
noun.16
	GRAP,HOOK
noun.17
	STAT
noun.18
	BOTT
noun.19
	CROS
noun.20
	GUN,PIST
noun.21
	LAMP,LANT,LIGH
noun.22
	FOOD
noun.23
	RUBY
noun.24
	FIGU,JADE
noun.25
	ACID,FLAS
noun.26
	WATE
noun.27
	CIGA
noun.28
	SAPP
noun.29
	MONE
noun.30
	CRYS,SWAN
noun.31
	ALL
noun.33
	LOCK
noun.34
	FIRE
noun.37
	WIND
noun.38
	SHUT
noun.39
	COUN,MAST,VAMP,VLAD
noun.40
	CASK,COFF
noun.41
	TUNN
noun.45
	ROOM
noun.46
	BOOK
noun.47
	DOOR
noun.48
	DRAW
noun.49
	BUTL
noun.50
	MIRR
noun.51
	MOAT
noun.52
	NOTE
noun.54
	BARS
noun.55
	BAT
noun.56
	BOAR
noun.57
	COMP
noun.76
	WERE,WOLF
noun.77
	GNOM
noun.78
	CYCL
noun.79
	GLAC,ICE
noun.80
	WIZA
room.1.afterlook
	@if @eq(@get(value.shuttr),0) @then
		@msg(message.des.417)
	@else
		@msg(@concat("message.des.",@add(@get(value.wind1),405)))
		@if @eq(@get(item.17.location),29) @then
			@msg(message.des.428)
		@endif
		@if @eq(@get(value.rope),2) @then
			@msg(message.des.413)
		@endif
	@endif
room.1.door
	-2
room.1.exit.d
	@comment("-29")
	@if @ne(@get(value.rope),2) @then
		@msg(message.1006)
	@else
		@goto(29)
	@endif
room.1.exit.leave
	w
room.1.exit.w
	2
room.1.hint
	@if @itemloc(19,0) @then
		@set(temp.hint,@get(message.hint.15))
	@elseif @eq(@get(value.shuttr),1) @and @lt(@get(value.wind1),3) @then
		@set(temp.hint,@get(message.hint.8))
	@endif
room.1.longdesc
	\n  You are in a large, tarnished brass bed in an old, musty bedroom.\n  cobwebs hang from the ceiling.  A few rays of light filter through\n  the shutters.  There is a nightstand nearby with a single wooden\n  drawer.  The door west creaks in the breeze.  A macabre portrait\n  hangs to the left of an empty fireplace.
room.1.shortdesc
	\n  You are in the bedroom.
room.2.door
	0
room.2.exit.d
	3
room.2.exit.e
	1
room.2.exit.n
	3
room.2.exit.w
	@comment("-4")
	@if @eq(@get(room.2.door),0) @then
		@msg(message.1019)
	@elseif @eq(@get(room.2.door),1) @then
		@msg(message.1042)
	@else
		@goto(4)
	@endif
room.2.longdesc
	\n  You are in a dim corridor lit by gaslight.  Doors exit\n  to the east and west.  A stairway leads down.
room.2.shortdesc
	\n  You are in the dim corridor.
room.3.door
	-2
room.3.exit.enter
	n
room.3.exit.n
	33
room.3.exit.s
	8
room.3.exit.u
	@comment("-2")
	@if @carry(4) @then
		@msg(message.1043)
		@goto(16)
		@set(value.lroom,0)
	@else
		@goto(2)
	@endif
room.3.exit.w
	5
room.3.longdesc
	\n  You are in the parlor, an old fashioned sitting room.  A display\n  case of dueling pistols hangs over the mantle. Stairs lead up to\n  a dimly lit corridor.  Open double doors lead west.  Two wide\n  hallways lead north and south.
room.3.shortdesc
	\n  You're in the parlor.
room.4.door
	2
room.4.exit.d
	44
room.4.exit.e
	@comment("-2")
	@if @eq(@get(room.4.door),0) @then
		@msg(message.1019)
	@elseif @eq(@get(room.4.door),1) @then
		@msg(message.1042)
	@else
		@goto(2)
	@endif
room.4.exit.leave
	e
room.4.longdesc
	\n  A cool wind blows up a stone stairway which descends\n  down into a large stone room.  A note written in blood\n  reads "VERY CLEVER OF YOU TO MAKE IT THIS FAR".\n  The door leads east, back to the hall.
room.4.shortdesc
	\n  You are in the locked room.
room.5.door
	-2
room.5.exit.e
	3
room.5.exit.n
	6
room.5.exit.s
	8
room.5.longdesc
	\n  This is the dining room.  A long table is set for 12 guests.\n  A swinging door leads north, and an arched passage leads\n  south.  Open double doors exit to the east.
room.5.shortdesc
	\n  You are in the dining room.
room.6.door
	0
room.6.exit.e
	@comment("-7")
	@if @eq(@get(room.6.door),0) @then
		@msg(message.1021)
	@elseif @eq(@get(room.6.door),1) @then
		@msg(message.1042)
	@else
		@goto(7)
	@endif
room.6.exit.enter
	e
room.6.exit.n
	31
room.6.exit.s
	5
room.6.longdesc
	\n  You are now in the kitchen.  Twelve Swanson's frozen entrees rest\n  on the counter, below a microwave oven.  "THE BEGINNER'S GUIDE TO\n  COOKING" lies on a small table.  A swinging door exits south.\n  Other doors lead east and north.
room.6.shortdesc
	\n  You are in the kitchen.
room.7.door
	2
room.7.exit.leave
	w
room.7.exit.w
	6
room.7.longdesc
	\n  The door opens to a brick wall.  ---DEAD END---\n\n  A note on the wall reads "L 8 R 31 L 59".
room.7.shortdesc
	\n  You're at a brick wall.
room.8.afterlook
	@msg(@concat("message.des.",@add(@get(value.but),400)))
room.8.door
	-2
room.8.exit.d
	24
room.8.exit.e
	3
room.8.exit.n
	5
room.8.exit.s
	11
room.8.exit.se
	10
room.8.exit.u
	9
room.8.exit.w
	12
room.8.longdesc
	\n  You are in the foyer.  An umbrella near the door is dripping on the\n  thick pile carpet.  A black cape is draped neatly over the banister\n  of a grand staircase leading up.  A magnificentl archway leads north.\n  Corridors lead south and southeast, a small hallway heads west,\n  and a narrow stairway goes down.
room.8.shortdesc
	\n  You're in foyer.
room.9.door
	-2
room.9.exit.d
	8
room.9.exit.e
	13
room.9.exit.n
	28
room.9.exit.u
	20
room.9.exit.w
	15
room.9.longdesc
	\n  You are in the upstairs hallway, a long corridor with passages\n  to the north, east, and west.  Stairs lead up and down.
room.9.shortdesc
	\n  You're in the upstairs hallway.
room.10.afterlook
	@msg(@concat("message.des.",@add(@get(value.wind2),405)))
room.10.door
	-2
room.10.exit.d
	@comment("-39")
	@if @eq(@get(value.wind2),3) @then
		@goto(39)
		@set(value.lroom,0)
	@else
		@msg(message.1006)
	@endif
room.10.exit.leave
	n
room.10.exit.n
	8
room.10.longdesc
	\n  This is the smoking room.  Several cans of tobacco line a shelf\n  above a small bookcase.  A large box of cigars lies on a table.\n  A Honeywell air purifier hums quietly beneath the window.  The\n  only exit is back north, the way you came in.
room.10.shortdesc
	\n  This is the smoking room.
room.11.door
	-2
room.11.exit.leave
	n
room.11.exit.n
	8
room.11.longdesc
	\n  You are in the workshop.  A myriad of tools clutter the workbench\n  and surrounding tables.  A thick layer of sawdust covers the floor.\n  Footprints in the sawdust indicate that you are not alone.
room.11.shortdesc
	\n  You're in the workshop.
room.12.door
	-2
room.12.exit.e
	@comment("-8")
	@if @carry(14) @then
		@msg(message.1081)
	@else
		@goto(8)
	@endif
room.12.exit.enter
	e
room.12.exit.w
	26
room.12.longdesc
	\n  This is the garden.  Tomato plants are growing neatly in rows.\n  A narrow path goes east and a wider one goes west.
room.12.shortdesc
	\n  You are in the garden.
room.13.afterlook
	@msg(message.1098)
	@if @eq(@get(value.ipass),1) @then
		@msg(message.des.412)
	@endif
room.13.door
	2
room.13.exit.d
	@comment("-17")
	@if @eq(@get(value.ipass),0) @then
		@msg(message.1006)
	@else
		@goto(17)
	@endif
room.13.exit.enter
	d
room.13.exit.leave
	w
room.13.exit.w
	9
room.13.longdesc
	\n  This is the library.  All four walls are lined with bookcases.\n  The room is brightly lit, although there is no apparent source\n  of light.
room.13.shortdesc
	\n  You are in the library.
room.14.door
	-2
room.14.exit.s
	16
room.14.exit.w
	18
room.14.longdesc
	\n  You are in a vast room full of laboratory equipment.  Several\n  experiments appear to be in progress, and the remnants of some\n  that failed are strewn about the room. A giant door hewn out of\n  granite leads south and an entrance leads west into darkness.
room.14.shortdesc
	\n  You are in the lab.
room.15.door
	-2
room.15.exit.e
	9
room.15.exit.leave
	e
room.15.longdesc
	\n  You are in a small boudoir.  The pink walls reflect the\n  soft lighting with a warm glow.  The door exits east.
room.15.shortdesc
	\n  You're in the boudoir.
room.16.door
	-2
room.16.exit.e
	14
room.16.exit.w
	34
room.16.longdesc
	\n  You are in a dark stone E/W passage.
room.16.shortdesc
	\n  You are in a dark E/W passage.
room.17.afterlook
	@if @eq(@get(value.ipass),1) @then
		@msg(message.des.412)
	@endif
room.17.door
	-2
room.17.exit.d
	@comment("-13")
	@if @eq(@get(value.ipass),0) @then
		@msg(message.1006)
	@else
		@goto(13)
	@endif
room.17.exit.enter
	d
room.17.exit.leave
	s
room.17.exit.s
	18
room.17.longdesc
	\n  You are in a low, dark chamber.  A single mirror\n  is set into the far wall.  The exit goes south.
room.17.shortdesc
	\n  You're in single mirror chamber.
room.18.door
	-2
room.18.exit.e
	14
room.18.exit.enter
	n
room.18.exit.n
	17
room.18.exit.w
	19
room.18.longdesc
	\n  You are in a dark E/W corridor.  A small but walkable\n  tunnel leads off to the north.
room.18.shortdesc
	\n  You're in a dark E/W corridor.
room.19.door
	-2
room.19.exit.e
	18
room.19.exit.leave
	e
room.19.longdesc
	\n  You are in an extremely dark, unfinished room.  The only light\n  emanates from a narrow slit in the ceiling.
room.19.shortdesc
	\n  You're in the dark room.
room.20.door
	-2
room.20.exit.d
	9
room.20.exit.enter
	n
room.20.exit.leave
	d
room.20.exit.n
	@comment("-21")
	@if @true(@get(value.bat)) @then
		@msg(message.1049)
	@else
		@goto(21)
	@endif
room.20.hint
	@if @true(@get(value.bat)) @then
		@set(temp.hint,@get(message.hint.19))
	@endif
room.20.longdesc
	\n  You are in a musty room that appears to be an entrance to\n  an attic.  A small passage leads north and stairs descend\n  down behind you.
room.20.shortdesc
	\n  You are in the attic entrance.
room.21.door
	0
room.21.exit.e
	22
room.21.exit.enter
	e
room.21.exit.s
	@comment("-20")
	@if @true(@get(value.bat)) @then
		@msg(message.1049)
	@else
		@goto(20)
	@endif
room.21.exit.w
	@comment("-23")
	@if @lt(@get(value.lock),3) @then
		@msg(message.1066)
	@else
		@goto(23)
	@endif
room.21.longdesc
	\n  You are in an old attic filled with old-fashioned clothes, a pile\n  of newspapers and some antiques.  An entrance to a cedar closet\n  is to the east and there is a door to a crawlspace to the west.
room.21.shortdesc
	\n  You are in an old attic.
room.22.door
	-2
room.22.exit.leave
	w
room.22.exit.w
	21
room.22.longdesc
	\n  You're in a cedar closet that smells of fresh cedar.  Racks of more\n  old-fashioned clothes lie to your right and left.
room.22.shortdesc
	\n  You're in a cedar closet.
room.23.door
	-2
room.23.exit.e
	21
room.23.exit.w
	41
room.23.longdesc
	\n  You are crawling along a low passage that leads east and west.
room.23.shortdesc
	\n  You're in a low E/W passage.
room.24.door
	-1
room.24.exit.enter
	w
room.24.exit.u
	8
room.24.exit.w
	25
room.24.longdesc
	\n  This is the laundry room.  Tattered clothes are scattered about.\n  An old-fashioned washing machine sits rotting in the corner.\n  On a shelf lies a box of Snowy Bleach and some Bounce fabric\n  softener.  The exit leads west and stairs lead up.
room.24.shortdesc
	\n  You're in the laundry room.
room.25.door
	-1
room.25.exit.e
	24
room.25.exit.leave
	e
room.25.longdesc
	\n  You are in a storage room filled with empty cardboard boxes\n  and some large crates filled with dirt. The door goes east.
room.25.shortdesc
	\n  You're in the storage room.
room.26.door
	-1
room.26.exit.e
	12
room.26.exit.n
	32
room.26.exit.s
	30
room.26.longdesc
	\n  You are at the side of a dirt road that runs north and south.\n  Fresh tracks in the road seem to indicate that a horse-drawn\n  carriage has passed here recently.  A narrow path leads east.
room.26.shortdesc
	\n  You are at the side of the dirt road.
room.27.door
	-1
room.27.exit.d
	@comment("-28")
	@script(script.move_mirror_maze)
room.27.exit.e
	@comment("-16")
	@script(script.move_mirror_maze)
room.27.exit.n
	@comment("-2")
	@script(script.move_mirror_maze)
room.27.exit.ne
	@comment("-2")
	@script(script.move_mirror_maze)
room.27.exit.nw
	@comment("-2")
	@script(script.move_mirror_maze)
room.27.exit.s
	@comment("-28")
	@script(script.move_mirror_maze)
room.27.exit.se
	@comment("-28")
	@script(script.move_mirror_maze)
room.27.exit.sw
	@comment("-2")
	@script(script.move_mirror_maze)
room.27.exit.u
	@comment("-28")
	@script(script.move_mirror_maze)
room.27.exit.w
	@comment("-28")
	@script(script.move_mirror_maze)
room.27.longdesc
	\n  This is the mirror maze.  A myriad of mirrors reflect your\n  image in a dazzling array of light.  The reflections make it\n  impossible to discren a direction.
room.27.shortdesc
	\n  You are wandering around the mirror maze.
room.28.door
	-1
room.28.exit.enter
	w
room.28.exit.s
	9
room.28.exit.w
	27
room.28.longdesc
	\n  You are in a narrow "L" shaped corridor, which leads\n  west and south.
room.28.shortdesc
	\n  You are in "L" shaped corridor.
room.29.afterlook
	@if @eq(@get(value.rope),2) @then
		@msg(message.des.413)
	@endif
room.29.door
	-1
room.29.exit.u
	@comment("-1 but not rowboat")
	@if @ne(@get(value.rope),2) @then
		@msg(message.1006)
	@elseif @carry(14) @then
		@msg(message.1081)
	@else
		@goto(1)
	@endif
room.29.longdesc
	\n  You are standing far below a large window.  Rows of\n  tall, exotic flowers form a wall around you.
room.29.shortdesc
	\n  You're underneath a window.
room.30.door
	-1
room.30.exit.n
	26
room.30.exit.w
	39
room.30.longdesc
	\n  You're at the end of a dirt road.  A woodland path\n  goes west.  The road leads north.
room.30.shortdesc
	\n  You're at the end of the road.
room.31.door
	-1
room.31.exit.leave
	s
room.31.exit.s
	6
room.31.longdesc
	\n  You are in a small pantry full of various foodstuffs.  To\n  your left is a beautiful china closet filled with dishes\n  pilfered from various restaurants.  On you right is an\n  open drawer full of plastic knives and forks.
room.31.shortdesc
	\n  You're in pantry.
room.32.door
	-1
room.32.exit.leave
	s
room.32.exit.s
	26
room.32.longdesc
	\n  You are at the bank of a wide moat which surrounds the\n  castle.  A small town can be seen far in the distance.\n  The road goes south.
room.32.shortdesc
	\n  You are at the side of the moat.
room.33.door
	-1
room.33.exit.leave
	s
room.33.exit.s
	3
room.33.longdesc
	\n  This is the armor room.  Suits of armor are lined up in\n  rows throughout the room.  Medieval instruments of war\n  are on display along each wall.  The door exits south.
room.33.shortdesc
	\n  You are in the armor room.
room.34.door
	-1
room.34.exit.e
	16
room.34.exit.nw
	36
room.34.exit.sw
	35
room.34.longdesc
	\n  You are at the proverbial fork in the road.  Paths\n  lead east, northwest, and southwest.
room.34.shortdesc
	\n  You're at the fork.
room.35.door
	-1
room.35.exit.leave
	ne
room.35.exit.ne
	34
room.35.longdesc
	\n  This is the torture chamber.  A matched set of thumb-\n  screws hangs on the far wall.  A large rack occupies\n  the center of the room.  A skeleton hangs from its\n  thumbs above you, swaying gently.  An arch leads NE.
room.35.shortdesc
	\n  You're in torture chamber.
room.36.door
	-1
room.36.exit.enter
	nw
room.36.exit.nw
	37
room.36.exit.se
	34
room.36.longdesc
	\n  You are in a small room with a high ceiling.  A huge\n  granite slab rests in the middle of the room.  The\n  exits lead SE and NW.
room.36.shortdesc
	\n  You're in slab room.
room.37.door
	-1
room.37.exit.s
	36
room.37.exit.u
	38
room.37.longdesc
	\n  You are at the bottom of a towering spiral stairway.\n  A low passage exits south.
room.37.shortdesc
	\n  You are at bottom of spiral stairs.
room.38.door
	-1
room.38.exit.d
	37
room.38.exit.leave
	d
room.38.longdesc
	\n  You are at the top of the castle tower.  Far off in\n  the distance you can see a dirt road leading to the\n  moat.  Across the moat is a small village.  A small\n  path winds west from the south end of the road.
room.38.shortdesc
	\n  You're at top of tower.
room.39.door
	-1
room.39.exit.e
	30
room.39.longdesc
	\n  You are standing below a small window.  A small\n  path winds its way east.
room.39.shortdesc
	\n  You are beneath small window.
room.40.afterlook
	@if @eq(@get(room.80.door),2) @then
		@msg(message.1110)
	@endif
room.40.door
	-1
room.40.exit.d
	@comment("-80")
	@if @eq(@get(room.80.door),2) @then
		@goto(80)
	@else
		@msg(message.1006)
	@endif
room.40.longdesc
	\n  You are on the far side of the moat.  You can see\n  a full view of the castle here in all its deadly\n  splendor.  A small town can be glimpsed far off in\n  the distance.  An old sign nailed to a tree reads:\n       "YOU CAN'T REACH THE VILLAGE FROM HERE!"
room.40.shortdesc
	\n  You're on the far side of the moat
room.41.door
	-1
room.41.exit.d
	42
room.41.exit.e
	23
room.41.exit.enter
	w
room.41.exit.nw
	42
room.41.exit.w
	43
room.41.longdesc
	\n  You are in a huge anteroom to an even larger, mysterious\n  chamber.  A chilling wind seems to blow at you from all\n  sides, and a deathlike, vapid black mist surrounds your\n  feet.  Hundreds of sinister looking bats cling to the\n  ceiling and eye you with a spine-tingling anticipatory\n  pleasure.  Two dark, foreboding passages exit to the east\n  and west, and a steep sloping corridor descends NW.
room.41.shortdesc
	\n  You're in a huge anteroom.
room.42.door
	-1
room.42.exit.leave
	u
room.42.exit.se
	41
room.42.exit.u
	41
room.42.longdesc
	\n  You're on a steep ledge above a seemingly bottomless pit.\n  Skeletal remains still cling to various rocks jutting out\n  of the pit.  Horrible, blood-curdling wails can be heard\n  from deep within the pit, obviously cries from the dead.\n  A steep corridor rises to the SE.
room.42.shortdesc
	\n  You're at a steep ledge.
room.43.afterlook
	@msg(@concat("message.des.",@add(@get(value.master),423)))
room.43.door
	-1
room.43.exit.e
	@if @eq(@get(value.master),3) @then
		@msg(message.1094)
		@dead
	@else
		@goto(41)
		@if @eq(@get(value.master),1) @or @eq(@get(value.master),2) @then
			@set(value.master,3)
		@endif
	@endif
room.43.exit.leave
	e
room.43.longdesc
	\n  You are in the chamber of the master of the castle,\n  Count Vladimir!  Pictures depicting scenes of tranquil\n  Transylvanian countrysides line the walls.  A huge\n  portrait of Vladimir's brother, Count Dracula, hangs\n  upon the near wall.  In the center of the room is a\n  large, ominous, mahogany coffin.
room.43.shortdesc
	\n  You're in the Master chamber.
room.44.door
	-1
room.44.exit.enter
	s
room.44.exit.leave
	u
room.44.exit.s
	45
room.44.exit.u
	4
room.44.longdesc
	\n  You are in a perfectly square room carved out of solid\n  rock.  Stone steps lead up.  An arched passage exits\n  south.  Above the arch is carved the message:\n\n       "ABANDON HOPE ALL YE WHO ENTER HERE".
room.44.shortdesc
	\n  You are in the square room.
room.45.door
	-1
room.45.exit.d
	46
room.45.exit.leave
	n
room.45.exit.n
	44
room.45.exit.s
	46
room.45.exit.u
	44
room.45.longdesc
	\n  You are in a long sloping N/S passage.  The darkness\n  seems to thicken around you as you walk.
room.45.shortdesc
	\n  You're in a sloping N/S passage.
room.46.door
	-1
room.46.exit.d
	47
room.46.exit.e
	54
room.46.exit.n
	45
room.46.exit.s
	47
room.46.exit.u
	45
room.46.longdesc
	\n  You are in a narrow room which extends out of sight\n  to the east.  Sloping paths exit north and south.\n  It is getting warmer here.
room.46.shortdesc
	\n  You're in narrow room.
room.47.afterlook
	@if @true(@get(value.fire)) @then
		@msg(message.1100)
	@endif
room.47.door
	-1
room.47.exit.n
	46
room.47.exit.ne
	@comment("-48")
	@if @true(@get(value.fire)) @then
		@msg(message.1101)
	@else
		@goto(48)
	@endif
room.47.exit.u
	46
room.47.exit.w
	49
room.47.longdesc
	\n  This is the fire room.  The stone walls are gutted\n  from centuries of evil fires.  It is very hot here.\n  A low trail leads west and a smaller one leads NE.\n  A sloping trail goes north.
room.47.shortdesc
	\n  You are in the fire room.
room.48.door
	-1
room.48.exit.enter
	n
room.48.exit.n
	56
room.48.exit.s
	69
room.48.exit.u
	69
room.48.exit.w
	47
room.48.longdesc
	\n  You're in a huge cavernous room carved out of a strange\n  glowing rock.  Small drops of water drip from various\n  limestone stalactites on the ceiling high above you.\n  A narrowing path heads west.  Another passage goes\n  north.  A large door with an awning goes south.
room.48.shortdesc
	\n  You're in glowing rock room.
room.49.door
	-1
room.49.exit.e
	47
room.49.exit.n
	57
room.49.exit.s
	50
room.49.longdesc
	\n  You are in the blue room.  The entire room is a deep\n  shade of royal blue.  Exits go north, south and east.
room.49.shortdesc
	\n  This is the blue room.
room.50.door
	-1
room.50.exit.e
	49
room.50.exit.s
	66
room.50.exit.w
	53
room.50.longdesc
	\n  You are in a narrow E/W passage.  A faint noise of\n  rushing water can be heard.  A small crawl goes south.
room.50.shortdesc
	\n  You are in narrow E/W passage.
room.51.door
	-1
room.51.exit.enter
	ne
room.51.exit.leave
	sw
room.51.exit.ne
	55
room.51.exit.sw
	54
room.51.longdesc
	\n  You are in a twisty tunnel that goes NE and SW.  It\n  seems to be cooler here.
room.51.shortdesc
	\n  You are in a twisty tunnel.
room.52.door
	-1
room.52.exit.e
	53
room.52.exit.leave
	e
room.52.longdesc
	\n  You are inside a small, low room with strange engravings\n  carved in all four walls.  Embedded in the rocky floor\n  is a large compass made of marble and mother-of-pearl.
room.52.shortdesc
	\n  You're in the compass room.
room.53.door
	-1
room.53.exit.e
	50
room.53.exit.enter
	w
room.53.exit.leave
	e
room.53.exit.w
	52
room.53.longdesc
	\n  You are outside a small room.  The path goes back\n  east, from whence you came.
room.53.shortdesc
	\n  You are outside a small room.
room.54.door
	-1
room.54.exit.ne
	51
room.54.exit.w
	46
room.54.longdesc
	\n  The path narrows here and continues NE under a\n  carefully constructed heart-shaped arch.  A\n  wider path leads west.  It is very quiet here.
room.54.shortdesc
	\n  You are at the heart shaped arch.
room.55.door
	-1
room.55.exit.leave
	sw
room.55.exit.sw
	51
room.55.longdesc
	\n  This is the honeymoon suite.  The entire room is\n  finished in red.  In the center of the room lies a\n  heart shaped bed.  To one side is a heart shaped\n  bath.  A large mirror is mounted on the ceiling above\n  the bed.  The only exit is back the way you came.
room.55.shortdesc
	\n  You're in honeymoon suite.
room.56.door
	-1
room.56.exit.s
	48
room.56.longdesc
	\n  This room has absolutely nothing in it.  Your footsteps\n  echo hollowly as you walk the length of the room.  On\n  the bare floor is scrawled the word "POOF".
room.56.shortdesc
	\n  You are in the empty room.
room.57.door
	-1
room.57.exit.d
	57
room.57.exit.e
	60
room.57.exit.n
	58
room.57.exit.ne
	61
room.57.exit.nw
	49
room.57.exit.s
	57
room.57.exit.se
	59
room.57.exit.sw
	49
room.57.exit.u
	57
room.57.exit.w
	57
room.57.hint
	@set(temp.hint,@get(message.hint.21))
room.57.longdesc
	\n  You're in a long and winding maze of passages.
room.57.shortdesc
	\n  You're in a maze of short and winding passages.
room.58.door
	-1
room.58.exit.d
	58
room.58.exit.e
	61
room.58.exit.n
	58
room.58.exit.ne
	60
room.58.exit.nw
	57
room.58.exit.s
	61
room.58.exit.se
	59
room.58.exit.sw
	63
room.58.exit.u
	58
room.58.exit.w
	59
room.58.hint
	@set(temp.hint,@get(message.hint.21))
room.58.longdesc
	\n  You're in a winding maze of long passages.
room.58.shortdesc
	\n  You're in a long and winding maze of passages.
room.59.door
	-1
room.59.exit.d
	64
room.59.exit.e
	58
room.59.exit.n
	59
room.59.exit.ne
	61
room.59.exit.nw
	58
room.59.exit.s
	63
room.59.exit.se
	60
room.59.exit.sw
	60
room.59.exit.u
	59
room.59.exit.w
	57
room.59.hint
	@set(temp.hint,@get(message.hint.21))
room.59.longdesc
	\n  You're in a maze of long and winding passages.
room.59.shortdesc
	\n  You're in a winding, long maze of passages.
room.60.door
	-1
room.60.exit.d
	60
room.60.exit.e
	59
room.60.exit.n
	58
room.60.exit.ne
	60
room.60.exit.nw
	62
room.60.exit.s
	61
room.60.exit.se
	61
room.60.exit.sw
	57
room.60.exit.u
	60
room.60.exit.w
	59
room.60.hint
	@set(temp.hint,@get(message.hint.21))
room.60.longdesc
	\n  You're in a long and winding maze of passages.
room.60.shortdesc
	\n  You're in a maze of long and winding passages.
room.61.door
	-1
room.61.exit.d
	61
room.61.exit.e
	60
room.61.exit.enter
	n
room.61.exit.enter.comment
	data error, 19, which is not 1-10
room.61.exit.leave
	n
room.61.exit.n
	59
room.61.exit.ne
	61
room.61.exit.nw
	58
room.61.exit.s
	57
room.61.exit.se
	58
room.61.exit.sw
	60
room.61.exit.u
	61
room.61.exit.w
	62
room.61.hint
	@set(temp.hint,@get(message.hint.21))
room.61.longdesc
	\n  You're in a short and winding maze of passages.
room.61.shortdesc
	\n  You're in a maze of winding, long passages.
room.62.door
	-1
room.62.exit.d
	65
room.62.exit.e
	58
room.62.exit.enter
	u
room.62.exit.leave
	u
room.62.exit.n
	57
room.62.exit.ne
	63
room.62.exit.nw
	62
room.62.exit.s
	60
room.62.exit.se
	59
room.62.exit.sw
	61
room.62.exit.u
	62
room.62.exit.w
	64
room.62.hint
	@set(temp.hint,@get(message.hint.21))
room.62.longdesc
	\n  You're in a maze of short and winding passages.
room.62.shortdesc
	\n  You're in a short and winding maze of passages.
room.63.door
	-1
room.63.exit.d
	63
room.63.exit.e
	60
room.63.exit.enter
	n
room.63.exit.leave
	u
room.63.exit.n
	62
room.63.exit.ne
	57
room.63.exit.nw
	59
room.63.exit.s
	64
room.63.exit.se
	61
room.63.exit.sw
	63
room.63.exit.u
	74
room.63.exit.w
	58
room.63.hint
	@set(temp.hint,@get(message.hint.21))
room.63.longdesc
	\n  You're in a maze of short and winding passages.
room.63.shortdesc
	\n  You're in a winding maze of short passages.
room.64.door
	-1
room.64.exit.d
	58
room.64.exit.e
	60
room.64.exit.enter
	n
room.64.exit.leave
	n
room.64.exit.n
	58
room.64.exit.ne
	59
room.64.exit.nw
	59
room.64.exit.s
	59
room.64.exit.se
	58
room.64.exit.sw
	60
room.64.exit.u
	60
room.64.exit.w
	58
room.64.hint
	@set(temp.hint,@get(message.hint.21))
room.64.longdesc
	\n  DEAD END.
room.64.shortdesc
	\n  Dead end.
room.65.afterlook
	@if @true(@get(value.melt)) @then
		@msg(message.1116)
	@endif
room.65.door
	-1
room.65.exit.e
	62
room.65.exit.enter
	n
room.65.exit.n
	@comment("-90")
	@if @true(@get(value.melt)) @then
		@goto(90)
	@else
		@msg(message.1006)
	@endif
room.65.exit.sw
	73
room.65.exit.u
	78
room.65.hint
	@if @false(@get(value.melt)) @then
		@set(temp.hint,@get(message.hint.22))
	@endif
room.65.longdesc
	\n  This is the glacier room.  The walls are covered with\n  dazzling shapes of ice which reflect the light from your\n  lamp in a million colors.  In the far side of the room\n  are magnificent ice sculptures of animals unknown to\n  Mankind.  A faint "X" is scratched in the ice on one wall.\n  Icy passages exit SW and east.  A steep trail goes up.
room.65.shortdesc
	\n  You are in the glacier room.
room.66.door
	-1
room.66.exit.e
	68
room.66.exit.n
	50
room.66.longdesc
	\n  You are in a long bending tunnel which leads north\n  and east.  The walls are damp here, and you can\n  distinctly hear the sound of rushing water.
room.66.shortdesc
	\n  You are in the long damp tunnel.
room.67.door
	-1
room.67.exit.d
	68
room.67.exit.enter
	w
room.67.exit.leave
	d
room.67.longdesc
	\n  You are on a ledge overlooking the underground waterfall.\n  Torrents of water cascade over smoothly polished rocks\n  and crash loudly several hundred feet below.  The water\n  sprays a fine, refreshing mist throughout the cavern.\n  Exotic marine creatures dance below the surface of the\n  still water at the base of the waterfall.  Thousands of\n  pennies are visible beneath the water where previous\n  explorers have wished for luck in escaping from the cave.\n  High above you a rainbow bridges the mist, displaying the\n  entire visible spectrum.  Stone steps lead down.
room.67.shortdesc
	\n  You're overlooking waterfall.
room.68.door
	-1
room.68.exit.enter
	e
room.68.exit.leave
	w
room.68.exit.u
	67
room.68.exit.w
	66
room.68.longdesc
	\n  You are at the base of a magnificent underground waterfall.\n  A cool mist rising off the surface of the water almost obscures\n  a small island.  A tunnel goes west and stone steps lead up.
room.68.shortdesc
	\n  You are at the base of the waterfall.
room.69.door
	-1
room.69.exit.d
	48
room.69.exit.e
	70
room.69.exit.enter
	e
room.69.exit.leave
	n
room.69.exit.n
	48
room.69.longdesc
	\n  This is the main lobby.  A gaudy crystal chandelier hangs\n  from the center of a tastelessly finished room.  The decor\n  seems to be from the depression, although junk like this\n  is timeless.  A passageway leads north and down.  To the\n  east is an open elevator.
room.69.shortdesc
	\n  This is the lobby.
room.70.door
	-1
room.70.exit.d
	@comment("elevator down")
	@script(script.adscor)
	@if @carry(3) @and @ge(@get(temp.adscor),@get(value.max)) @then
		@for(i,1,@get(value.nitems))
			@if @itemloc($i,70) @then
				@sendto($i,99)
			@endif
		@endfor
		@goto(99)
		@set(value.lroom,0)
	@else
		@for(i,1,@get(value.nitems))
			@if @itemloc($i,70) @then
				@sendto($i,71)
			@endif
		@endfor
		@goto(71)
	@endif
room.70.exit.leave
	w
room.70.exit.w
	69
room.70.longdesc
	\n  You are inside an elevator.  The light panel indicates that\n  you are on the upper of two levels.  The "THIS CAR NEXT"\n  sign is lit.
room.70.shortdesc
	\n  You're in elevator on top floor.
room.71.door
	-1
room.71.exit.enter
	e
room.71.exit.leave
	w
room.71.exit.u
	@comment("-70")
	@script(script.adscor)
	@if @carry(3) @and @ge(@get(temp.adscor),@get(value.max)) @then
		@for(i,1,@get(value.nitems))
			@if @itemloc($i,71) @then
				@sendto($i,99)
			@endif
		@endfor
		@goto(99)
		@set(value.lroom,0)
	@else
		@for(i,1,@get(value.nitems))
			@if @itemloc($i,71) @then
				@sendto($i,70)
			@endif
		@endfor
		@goto(70)
	@endif
room.71.exit.w
	72
room.71.longdesc
	\n  You are inside an elevator.  The light panel indicates that\n  you are on the lower of two levels.  The "THIS CAR NEXT"\n  sign is lit.
room.71.shortdesc
	\n  You're in elevator on bottom floor.
room.72.door
	-1
room.72.exit.e
	71
room.72.exit.enter
	s
room.72.exit.leave
	e
room.72.longdesc
	\n  This is the safe deposit vault, an immense room with polished\n  steel walls.  A closed circuit T.V. camera hums quietly above\n  you as it pans back and forth across the room.  To the east is\n  an open elevator.  Engraved on the far wall is the message:\n          "DEPOSIT TREASURES HERE FOR FULL CREDIT"
room.72.shortdesc
	\n  You are in the treasure vault.
room.73.door
	-1
room.73.exit.e
	65
room.73.exit.s
	74
room.73.longdesc
	\n  You are in a room full of old and decaying skeletons.  The\n  rotting forms of many werewolves can be identified among\n  the bodies.  Along the near wall is a desk with a crystal\n  ball and a nameplaque that says "OLD GYPSY WOMAN".  The\n  gypsy is nowhere to be seen.  A path leads east and a small\n  tunnel goes south.
room.73.shortdesc
	\n  You are in the burial grounds.
room.74.door
	-1
room.74.exit.e
	63
room.74.exit.enter
	n
room.74.exit.n
	73
room.74.exit.s
	75
room.74.exit.w
	77
room.74.longdesc
	\n  You are in a small room which is the junction of four small\n  tunnels.  The tunnels lead north, south, east and (you\n  guessed it) west.
room.74.shortdesc
	\n  You are at four tunnel junction.
room.75.door
	-1
room.75.exit.leave
	n
room.75.exit.n
	74
room.75.exit.se
	76
room.75.exit.u
	76
room.75.exit.w
	82
room.75.longdesc
	\n  You are in an immense cavern filled with tropical flora\n  and fauna, reminiscent of an Amazon rain forest.  Wild\n  parrots and toucans fly aimlessly overhead.  The sound\n  of rushing water is coming from the SE.  A small tunnel\n  goes north and a rocky trail leads west.
room.75.shortdesc
	\n  You are in rain forest.
room.76.door
	-1
room.76.exit.d
	75
room.76.exit.leave
	d
room.76.exit.nw
	75
room.76.longdesc
	\n  You are up on a ledge which affords a partial view of a\n  large underground waterfall.  Across the water you can\n  see a larger ledge which provides a better vantage point.\n  A climbable cliff goes down and NW.
room.76.shortdesc
	\n  You are up on a small ledge.
room.77.door
	-1
room.77.exit.e
	74
room.77.exit.leave
	e
room.77.exit.s
	83
room.77.longdesc
	\n  You are in a room whose walls are covered with graffiti.\n  The messages range from "FRODO LIVES" to filthy remarks\n  concerning the parental lineage of werewolves.  A rocky\n  path goes south.  A low tunnel leads east.
room.77.shortdesc
	\n  You are in the graffiti room.
room.78.door
	-1
room.78.exit.d
	65
room.78.exit.w
	79
room.78.longdesc
	\n  You are at the east end of a long, damp earthen tunnel.  Above\n  you dangle rows of tomato plant roots arranged neatly in rows.\n  A steep but climbable trail plummets down.
room.78.shortdesc
	\n  You're at east end of a damp, earthen tunnel.
room.79.door
	-1
room.79.exit.e
	78
room.79.exit.enter
	w
room.79.exit.w
	80
room.79.longdesc
	\n  You are at the west end of a long, damp earthen tunnel.  Water\n  drips down from the roof and seeps into the muddy floor.  The\n  tunnel continues east, and a drier passage leads west.
room.79.shortdesc
	\n  You're at west end of a damp, earthen tunnel.
room.80.door
	0
room.80.exit.e
	79
room.80.exit.enter
	u
room.80.exit.u
	@comment("-40")
	@if @eq(@get(room.80.door),2) @then
		@goto(40)
	@else
		@msg(message.1042)
	@endif
room.80.longdesc
	\n  You are in the remains of an old wine cellar, apparantly the\n  victim of a cave in.  Casks of once fine wine lie crushed in\n  the rubble.  A battered keg of GENESEE sits off in the corner.\n  The room smells like a Rathskellar band party.  A muddy path\n  goes east, and steps lead up to a door in the ceiling.
room.80.shortdesc
	\n  You are in the wine cellar.
room.81.door
	-1
room.81.longdesc
	\n  You are on a small island near a large waterfall.  The sound of\n  crashing surf can be clearly heard, although you cannot quite\n  make out the form of the waterfall through the thick mist.  A\n  message traced out in the sand reads "GILLIGAN WAS HERE".  There\n  are pieces of a wreck (the S.S. MINNOW?) scattered about.
room.81.shortdesc
	\n  You are on the island near the falls.
room.82.door
	-1
room.82.exit.e
	75
room.82.exit.enter
	e
room.82.exit.leave
	e
room.82.exit.s
	83
room.82.longdesc
	\n  You are in the north end of a large cavern that extends\n  far to the south.  A low crawl leads to the east.
room.82.shortdesc
	\n  You're at north end of an immense cavern.
room.83.afterlook
	@if @true(@get(value.prec)) @then
		@msg(message.1011)
	@endif
room.83.door
	-1
room.83.exit.e
	77
room.83.exit.leave
	e
room.83.exit.n
	82
room.83.exit.u
	@comment("-84")
	@if @true(@get(value.prec)) @then
		@goto(84)
	@else
		@msg(message.1006)
	@endif
room.83.longdesc
	\n  You are in the south end of a large cavern.  The\n  cavern wall before you rises vertically, ending at a\n  ledge well out of your reach.  The cavern continues\n  north and out of sight.  A tiny trail heads east.
room.83.shortdesc
	\n  You are at the south end of a large cavern.
room.84.afterlook
	@if @true(@get(value.prec)) @then
		@msg(message.1011)
	@endif
room.84.door
	-1
room.84.exit.d
	@comment("-83")
	@if @true(@get(value.prec)) @then
		@goto(83)
	@else
		@msg(message.1006)
	@endif
room.84.exit.e
	85
room.84.exit.enter
	e
room.84.exit.w
	86
room.84.longdesc
	\n  You are at the edge of a sheer vertical drop overlooking\n  an immense N/S cavern.  Narrow paths head away to the\n  east and west.
room.84.shortdesc
	\n  You are at the top of a steep precipice.
room.85.door
	-1
room.85.exit.d
	61
room.85.exit.leave
	w
room.85.exit.s
	87
room.85.exit.w
	84
room.85.longdesc
	\n  This is the disco room.  Multicolored lasers pulsate\n  wildly to the beat of badly mixed music.  A stairway\n  down is barely visible through the glare.  A large\n  passage exits south, and a smaller one leads west.
room.85.shortdesc
	\n  This is the disco room.
room.86.afterlook
	@if @true(@get(value.hole)) @then
		@msg(message.1117)
	@elseif @itemloc(27,-3) @then
		@msg(message.1119)
	@else
		@msg(message.1118)
	@endif
room.86.door
	-1
room.86.exit.e
	84
room.86.exit.enter
	s
room.86.exit.leave
	e
room.86.exit.s
	@comment("-88")
	@if @true(@get(value.hole)) @then
		@goto(88)
	@else
		@msg(message.1006)
	@endif
room.86.exit.se
	87
room.86.exit.w
	91
room.86.hint
	@if @false(@get(value.hole)) @then
		@set(temp.hint,@get(message.hint.23))
	@endif
room.86.longdesc
	\n  You are in a tall tunnel leading east and west.  A small\n  trail goes SE.  An immense wooden door heads south.
room.86.shortdesc
	\n  You're in the center of a tall tunnel.
room.87.door
	-1
room.87.exit.enter
	n
room.87.exit.leave
	w
room.87.exit.n
	85
room.87.exit.w
	86
room.87.longdesc
	\n  You have entered the land of the living dead, a\n  large, desolate room.  Although it is apparently\n  uninhabited, you can hear the awful sounds of\n  thousands of lost souls weeping and moaning.\n  In the east corner are stacked the remains of\n  dozens of previous adventurers who were less\n  fortunate than yourself.  To the north is a\n  foreboding passage.  A path goes west.
room.87.shortdesc
	\n  You are in the land of the living dead.
room.88.door
	-1
room.88.exit.leave
	n
room.88.exit.n
	86
room.88.longdesc
	\n  You are in the lair of the cyclops.  The broken bones of\n  previous explorers are strewn about the room.  One huge\n  contact lens lies on a high table.  The cyclops seems\n  to be gone.  A splintered door exits north.
room.88.shortdesc
	\n  You are in the cyclops' lair.
room.89.door
	-1
room.89.exit.leave
	w
room.89.exit.w
	90
room.89.longdesc
	\n  You are in an extremely cold chamber imbedded deep\n  within the glacier.  Stalagtites of ice hang from\n  the ceiling far above you.  An ominous tunnel leaves\n  to the west.
room.89.shortdesc
	\n  You are deep inside the glacier.
room.90.door
	-1
room.90.exit.e
	89
room.90.exit.enter
	u
room.90.exit.s
	65
room.90.longdesc
	\n  You are in a long, bending tunnel.  With your lamp\n  you can barely make out exits to the south and east.
room.90.shortdesc
	\n  You are in a cold, bending tunnel.
room.91.afterlook
	@if @carry(12) @and @true(@get(value.wiz)) @then
		@msg(message.des.409)
	@endif
room.91.door
	-1
room.91.exit.e
	86
room.91.exit.enter
	n
room.91.exit.leave
	e
room.91.exit.n
	92
room.91.longdesc
	\n  You are in a tremendous cavern divided by a white line\n  through its center.  The north side of the cavern is\n  green and fresh, a startling change from the callous\n  terrain of the cave.  A sign at the border proclaims\n  this to be the edge of the wizard's realm.  A rocky\n  and forlorn trail leads east, and a plush green path\n  wanders north.
room.91.shortdesc
	\n  You're at the border.
room.92.afterlook
	@if @carry(12) @and @true(@get(value.wiz)) @then
		@msg(message.des.410)
	@endif
room.92.door
	-1
room.92.exit.n
	@comment("-93")
	@if @carry(12) @then
		@goto(93)
	@else
		@msg(message.1127)
	@endif
room.92.exit.s
	91
room.92.longdesc
	\n  You are in an immense forest of tall trees.  Melodic\n  chanting can be heard in the distance.  The trees seem\n  to be guiding you along a N/S path.
room.92.shortdesc
	\n  You are in the forest of tall trees.
room.93.afterlook
	@if @true(@get(value.wiz)) @then
		@msg(message.1128)
	@endif
	@if @carry(12) @and @true(@get(value.wiz)) @then
		@msg(message.des.411)
	@endif
room.93.door
	-1
room.93.exit.e
	91
room.93.exit.enter
	w
room.93.exit.s
	92
room.93.exit.w
	@comment("-94")
	@if @true(@get(value.wiz)) @then
		@msg(message.1128)
	@else
		@goto(94)
	@endif
room.93.longdesc
	\n  This is the wizard's throne room.  Scattered about\n  the room are various magical items.  A long message\n  in ancient runes is carved into the southern wall.  It\n  translates roughly as "Beware the power of the Wizard,\n  for he is master of this place".  Two green paths go\n  south and east, and a marble walk leads west.
room.93.shortdesc
	\n  You are in the throne room.
room.94.door
	-1
room.94.exit.e
	93
room.94.exit.leave
	e
room.94.longdesc
	\n  You are in the wizard's cache, a large room whose walls\n  are inlaid with jewels.  A majestic marble walk leads to\n  the east.
room.94.shortdesc
	\n  This is the Wizard's cache.
room.95.afterlook
	@if @carry(3) @then
		@msg(message.1141)
	@endif
room.95.door
	-1
room.95.exit.e
	98
room.95.exit.n
	97
room.95.exit.s
	99
room.95.exit.w
	96
room.95.longdesc
	\n  You are in a room of mammoth proportions which seems\n  to be some sort of warehouse.  On a nearby table are\n  several clipboards and a massive pile of order forms.\n  To your right is a large loading dock and a truck bay.\n  The room opens to the north, east and west.
room.95.shortdesc
	\n  You are in the main room of the warehouse.
room.96.afterlook
	@if @carry(3) @then
		@msg(message.1141)
	@endif
room.96.door
	-1
room.96.exit.e
	95
room.96.longdesc
	\n  You are in the western end of the Castlequest warehouse.\n  To one side sits an empty kerosene drum.  Scattered\n  all over the floor are shreds of foam rubber used to\n  pack delicate crystal swans for shipping.  The empty\n  tins of countless T.V. dinners are discarded around\n  a full garbage can.
room.96.shortdesc
	\n  You are in the west end of the warehouse.
room.97.afterlook
	@if @carry(3) @then
		@msg(message.1141)
	@endif
room.97.door
	-1
room.97.exit.s
	95
room.97.longdesc
	\n  You are in the north end of the Castlequest warehouse.\n  There is a large box of BIC CLICs to your left, all\n  empty (they don't write "first time, every time").\n  On a shelf to your right is a huge supply of Burpee\n  tomato plant seeds.
room.97.shortdesc
	\n  You are in the north end of the warehouse.
room.98.afterlook
	@if @carry(3) @then
		@msg(message.1141)
	@endif
room.98.door
	-1
room.98.exit.w
	95
room.98.longdesc
	\n  You are in the eastern end of the Castlequest warehouse.\n  In a box near the corner are the empty cartridges from\n  many silver bullets.  Through a small window you can spy\n  the Vampire Diner (talk about greasy spoons).
room.98.shortdesc
	\n  You are in the east end of the warehouse.
room.99.afterlook
	@if @true(@get(value.masect)) @then
		@msg(message.1136)
	@endif
	@if @carry(3) @then
		@msg(message.1141)
	@endif
room.99.door
	-1
room.99.exit.e
	@comment("-95")
	@script(script.masect_exit)
room.99.exit.enter
	w
room.99.exit.leave
	w
room.99.exit.n
	@comment("-95")
	@script(script.masect_exit)
room.99.exit.ne
	@comment("-95")
	@script(script.masect_exit)
room.99.exit.nw
	@comment("-95")
	@script(script.masect_exit)
room.99.exit.s
	@comment("-95")
	@script(script.masect_exit)
room.99.exit.se
	@comment("-95")
	@script(script.masect_exit)
room.99.exit.sw
	@comment("-95")
	@script(script.masect_exit)
room.99.exit.w
	@comment("-95")
	@script(script.masect_exit)
room.99.longdesc
	\n  The elevator has screeched to a halt between two floors.
room.99.shortdesc
	\n  You are in the elevator, stuck between floors.
room.100.afterlook
	@script(script.gameover)
room.100.door
	-1
room.100.longdesc
	\n  You feel the elevator jump as you are wisked up towards\n  ground level.  You emerge in the open air in the village\n  square amidst cheers from the local villagers.  Banners\n  proclaiming the death of count Vladimir hang from most\n  of the old buildings around the square.  The mayor\n  presents you with a key to the city and makes your\n  birthday a holiday.  You watch the sun rise as you\n  bask in your newfound fame.
room.100.shortdesc
	\n  END OF GAME
script.adscor
	@set(temp.adscor,0)
	@if @itemloc(4,72) @then
		@addto(temp.adscor,@get(item.4.treasurevalue))
	@endif
	@if @itemloc(7,72) @then
		@addto(temp.adscor,@get(item.7.treasurevalue))
	@endif
	@if @itemloc(12,72) @then
		@addto(temp.adscor,@get(item.12.treasurevalue))
	@endif
	@if @itemloc(17,72) @then
		@addto(temp.adscor,@get(item.17.treasurevalue))
	@endif
	@if @itemloc(18,81) @then
		@addto(temp.adscor,@get(item.18.treasurevalue))
	@endif
	@if @itemloc(19,72) @then
		@addto(temp.adscor,@get(item.19.treasurevalue))
	@endif
	@if @itemloc(23,72) @then
		@addto(temp.adscor,@get(item.23.treasurevalue))
	@endif
	@if @itemloc(24,72) @then
		@addto(temp.adscor,@get(item.24.treasurevalue))
	@endif
	@if @itemloc(28,72) @then
		@addto(temp.adscor,@get(item.28.treasurevalue))
	@endif
	@if @itemloc(29,72) @then
		@addto(temp.adscor,@get(item.29.treasurevalue))
	@endif
	@if @itemloc(30,72) @then
		@addto(temp.adscor,@get(item.30.treasurevalue))
	@endif
	@comment("CQ1980 subtracts 1/5 point per move over 250. Not included here.")
	@if @true(@get(value.debug)) @then
		@write("\n  ### ADSCOR = ",@get(temp.adscor),"\n")
	@endif
script.attack_bat
	@set(temp.yorn,@getinchannel)
	@if @not @isbool(@get(temp.yorn)) @then
		@msg(message.yorn.2001)
	@elseif @true(@get(temp.yorn)) @then
		@msg(message.des.416)
	@else
		@msg(message.1008)
	@endif
script.attack_butler
	@set(temp.yorn,@getinchannel)
	@if @not @isbool(@get(temp.yorn)) @then
		@msg(message.yorn.2001)
	@elseif @true(@get(temp.yorn)) @then
		@msg(message.des.415)
	@else
		@msg(message.1008)
	@endif
script.attack_hunchback
	@sendto(8,0)
	@msg(message.des.422)
script.attack_master
	@set(temp.yorn,@getinchannel)
	@if @not @isbool(@get(temp.yorn)) @then
		@msg(message.yorn.2001)
	@elseif @true(@get(temp.yorn)) @then
		@msg(message.1086)
	@else
		@msg(message.1008)
	@endif
script.attack_wolf
	@set(temp.yorn,@getinchannel)
	@if @not @isbool(@get(temp.yorn)) @then
		@msg(message.yorn.2001)
	@elseif @true(@get(temp.yorn)) @then
		@msg(message.des.414)
	@else
		@msg(message.1008)
	@endif
script.break_board_hand
	@set(temp.yorn,@getinchannel)
	@if @not @isbool(@get(temp.yorn)) @then
		@msg(message.yorn.2001)
	@elseif @true(@get(temp.yorn)) @then
		@msg(message.1040)
	@else
		@msg(message.1008)
	@endif
script.check_butler_note
	@if @eq(@get(value.but),1) @then
		@if @itemloc(10,-3) @then
			@set(value.but,2)
		@elseif @here(10) @and @here(11) @then
			@set(value.but,2)
		@endif
		@if @eq(@get(value.but),2) @then
			@sendto(10,-3)
			@sendto(11,-3)
		@endif
	@endif
script.dead
	@addto(value.ndeath,1)
	@set(value.lamp,0)
	@if @eq(@get(value.match),1) @then
		@set(value.match,0)
	@endif
	@set(value.gnome,false)
	@set(value.wolf,false)
	@comment("fix combined item flags")
	@if @carry(20) @then
		@set(value.gun,false)
	@endif
	@if @carry(18) @then
		@set(value.bottle,false)
	@endif
	@if @carry(26) @then
		@set(value.water,false)
	@endif
	@if @carry(5) @then
		@set(value.blood,false)
	@endif
	@if @carry(9) @and @eq(@get(value.rope),3) @then
		@set(value.rope,0)
	@endif
	@comment("send treasures into maze")
	@if @carry(7) @then
		@sendto(7,@add(@rnd(7),57))
	@endif
	@if @carry(12) @then
		@sendto(12,@add(@rnd(7),57))
	@endif
	@if @carry(17) @then
		@sendto(17,@add(@rnd(7),57))
	@endif
	@if @carry(19) @then
		@sendto(19,@add(@rnd(7),57))
	@endif
	@if @carry(23) @then
		@sendto(23,@add(@rnd(7),57))
	@endif
	@if @carry(24) @then
		@sendto(24,@add(@rnd(7),57))
	@endif
	@if @carry(28) @then
		@sendto(28,@add(@rnd(7),57))
	@endif
	@if @carry(29) @then
		@sendto(29,@add(@rnd(7),57))
	@endif
	@if @carry(30) @then
		@sendto(30,@add(@rnd(7),57))
	@endif
	@for(i,1,@get(value.nitems))
		@if @carry($i) @then
			@sendto($i,@add(@rnd(19),2))
		@endif
	@endfor
	@set(value.numb,0)
	@subto(value.score,10)
	@if @eq(@get(value.ndeath),1) @then
		@msg(message.died.7010)
		@setoutchannel("#ASK;")
		@setoutchannel("@script(script.dead1)")
	@elseif @eq(@get(value.ndeath),2) @then
		@msg(message.died.7015)
		@setoutchannel("#ASK;")
		@setoutchannel("@script(script.dead2)")
	@else
		@msg(message.died.7021)
		@script(script.gameover)
	@endif
script.dead1
	@set(temp.yorn,@getinchannel)
	@if @not @isbool(@get(temp.yorn)) @then
		@msg(message.yorn.2001)
		@setoutchannel("#ASK;")
		@setoutchannel("@script(script.dead1)")
	@elseif @true(@get(temp.yorn)) @then
		@msg(message.died.7013)
		@set(room.1.visited,false)
		@goto(1)
		@set(value.lroom,0)
	@else
		@script(script.gameover)
	@endif
script.dead2
	@set(temp.yorn,@getinchannel)
	@if @not @isbool(@get(temp.yorn)) @then
		@msg(message.yorn.2001)
		@setoutchannel("#ASK;")
		@setoutchannel("@script(script.dead2)")
	@elseif @true(@get(temp.yorn)) @then
		@msg(message.died.7018)
		@set(room.9.visited,false)
		@goto(9)
		@set(value.lroom,0)
	@else
		@script(script.gameover)
	@endif
script.gameover
	@set(temp.score,@get(value.score))
	@script(script.adscor)
	@addto(temp.score,@get(temp.adscor))
	@write(@format(@get(message.9997),@get(temp.score),@get(value.maxscr)))
	@nl
	@if @eq(@get(temp.score),@get(value.maxscr)) @then
		@msg(message.7001)
	@elseif @ge(@get(temp.score),@div(@mul(@get(value.maxscr),3),4)) @then
		@msg(message.7002)
	@elseif @ge(@get(temp.score),@div(@get(value.maxscr),2)) @then
		@msg(message.7003)
	@elseif @ge(@get(temp.score),@div(@get(value.maxscr),4)) @then
		@msg(message.7004)
	@elseif @ge(@get(temp.score),0) @then
		@msg(message.7005)
	@else
		@msg(message.7006)
	@endif
	@quit
script.ggnome
	@if @false(@get(value.norandom)) @then
		@set(temp.val,@rnd(1000))
		@if @false(@get(value.gnome)) @then
			@if @gt(@get(temp.val),970) @then
				@set(value.gnome,true)
				@set(value.gnomexlim,75)
			@endif
		@endif
		@if @true(@get(value.gnome)) @then
			@comment("GNOME ATTACKS!")
			@msg(message.gnome.1001)
			@if @le(@get(temp.val),980) @then
				@msg(message.gnome.1004)
				@if @lt(@rnd(1000),@get(value.gnomexlim)) @then
					@msg(message.gnome.1002)
					@dead
				@else
					@addto(value.gnomexlim,200)
					@msg(message.gnome.1003)
				@endif
			@endif
		@endif
	@endif
script.intro1
	@set(temp.yorn,@getinchannel)
	@if @not @isbool(@get(temp.yorn)) @then
		@msg(message.yorn.2001)
		@setoutchannel("#ASK;")
		@setoutchannel("@script(script.intro1)")
	@elseif @true(@get(temp.yorn)) @then
		@msg(message.hint.30)
		@msg(message.hint.31)
		@msg(message.hint.1001)
		@setoutchannel("#ASK;")
		@setoutchannel("@script(script.intro2)")
	@else
		@script(script.introdone)
	@endif
script.intro2
	@set(temp.yorn,@getinchannel)
	@if @not @isbool(@get(temp.yorn)) @then
		@msg(message.yorn.2001)
		@setoutchannel("#ASK;")
		@setoutchannel("@script(script.intro2)")
	@elseif @true(@get(temp.yorn)) @then
		@msg(message.hint.32)
		@msg(message.hint.1001)
		@setoutchannel("#ASK;")
		@setoutchannel("@script(script.intro3)")
	@else
		@script(script.introdone)
	@endif
script.intro3
	@set(temp.yorn,@getinchannel)
	@if @not @isbool(@get(temp.yorn)) @then
		@msg(message.yorn.2001)
		@setoutchannel("#ASK;")
		@setoutchannel("@script(script.intro3)")
	@elseif @true(@get(temp.yorn)) @then
		@msg(message.hint.33)
		@script(script.introdone)
	@else
		@script(script.introdone)
	@endif
script.introdone
	@modmessages
	@look
	@comment("CQ1980 doesn't set visited at start")
	@set(room.1.visited,true)
script.lamp_moves
	@comment("lamp moves")
	@if @eq(@get(value.lamp),1) @or @eq(@get(value.lamp),2) @then
		@addto(value.lmove,1)
		@if @true(@get(value.debug)) @then
			@write("\n  ### LAMP MOVES = ",@get(value.lmove),"\n")
		@endif
		@if @eq(@get(value.lamp),1) @and @ge(@get(value.lmove),@get(value.lampdim)) @then
			@set(value.lamp,2)
			@msg(message.1083)
			@if @carry(1) @and @carry(21) @then
				@msg(message.1085)
				@sendto(1,0)
				@set(value.lmove,0)
				@set(value.lamp,1)
			@endif
		@elseif @eq(@get(value.lamp),2) @and @ge(@get(value.lmove),@get(value.lampout)) @then
			@set(value.lamp,3)
			@msg(message.1009)
			@if @dark @then
				@msg(message.1064)
			@endif
		@endif
	@endif
script.lost_acid
	@comment("these require the acid")
	@if @gt(@get(item.17.findvalue),0) @then
		@subto(value.max,@get(item.17.treasurevalue))
	@endif
script.lost_rope
	@comment("these require the rope")
	@if @gt(@get(item.12.findvalue),0) @then
		@subto(value.max,@get(item.12.treasurevalue))
	@endif
	@if @gt(@get(item.17.findvalue),0) @then
		@subto(value.max,@get(item.17.treasurevalue))
	@endif
	@if @gt(@get(item.29.findvalue),0) @then
		@subto(value.max,@get(item.29.treasurevalue))
	@endif
script.masect_exit
	@comment("any direction works")
	@if @true(@get(value.masect)) @then
		@goto(95)
	@else
		@msg(message.1006)
	@endif
script.match_moves
	@comment("match moves")
	@if @eq(@get(value.match),1) @then
		@addto(value.mmove,1)
		@if @true(@get(value.debug)) @then
			@write("\n  ### MATCH MOVES = ",@get(value.mmove),"\n")
		@endif
		@if @ge(@get(value.mmove),10) @then
			@set(value.match,2)
			@sendto(15,0)
			@msg(message.1088)
			@if @dark @then
				@msg(message.1064)
			@endif
			@comment("these require the match")
			@if @false(@get(value.hole)) @then
				@if @gt(@get(item.12.findvalue),0) @then
					@subto(value.max,@get(item.12.treasurevalue))
				@endif
			@endif
			@if @false(@get(value.melt)) @then
				@if @gt(@get(item.30),0) @then
					@subto(value.max,@get(item.30.treasurevalue))
				@endif
			@endif
		@endif
	@endif
script.movenextroom
	@if @dark @and @false(@get(value.debug)) @then
		@msg(message.1077)
		@dead
	@elseif @not @exists(temp.nextroom) @or @eq(@get(temp.nextroom),0) @then
		@msg(message.1006)
	@elseif @isscript(temp.nextroom) @then
		@script(temp.nextroom)
	@else
		@goto(@get(temp.nextroom))
	@endif
script.move_mirror_maze
	@if @eq(@get(value.master),4) @then
		@comment("modification: CQ1980 only has 20% chance for this")
		@goto(2)
	@elseif @true(@get(value.norandom)) @or @rand(20) @then
		@goto(@get(@concat("wher.",@add(@rnd(10),1))))
	@else
		@goto(27)
		@set(value.lroom,27)
	@endif
script.rope_hook_prec
	@sendto(9,84)
	@sendto(16,84)
	@set(value.prec,true)
	@incmoves
	@msg(message.1011)
script.score
	@set(temp.score,@get(value.score))
	@script(script.adscor)
	@addto(temp.score,@get(temp.adscor))
	@write(@format(@get(message.9998),@get(value.numove),@get(temp.score)))
	@nl
script.shoot_wolf
	@if @true(@get(value.wolf)) @then
		@if @carry(20) @then
			@if @true(@get(value.gun)) @then
				@set(value.gun,false)
				@drop(2)
				@incmoves
				@if @rand(15) @then
					@msg(message.1065)
				@else
					@set(value.wolf,false)
					@msg(message.1053)
				@endif
				@msg(item.2.longdesc)
			@else
				@msg(message.1054)
			@endif
		@else
			@msg(message.1005)
		@endif
	@else
		@msg(message.1003)
	@endif
script.want_hint
	@if @null(@get(temp.hint)) @then
		@msg(message.hint.1002)
	@else
		@msg(message.hint.1003)
		@setoutchannel("#ASK;")
		@setoutchannel("@script(script.write_hint)")
	@endif
script.want_item_hint
	@comment("item.X.hint is a script to set temp.hint=msg")
	@set(temp.hint,null)
	@script(@concat("item.",@get(temp.item),".hint"))
	@script(script.want_hint)
script.want_room_hint
	@comment("room.X.hint is a script to set temp.hint=msg")
	@set(temp.hint,null)
	@script(@concat("room.",@room,".hint"))
	@script(script.want_hint)
script.write_hint
	@set(temp.yorn,@getinchannel)
	@if @not @isbool(@get(temp.yorn)) @then
		@msg(message.yorn.2001)
	@elseif @true(@get(temp.yorn)) @then
		@subto(value.score,5)
		@write(@get(temp.hint))
		@nl
	@else
		@msg(message.1008)
	@endif
script.wwolf
	@if @false(@get(value.norandom)) @then
		@comment("modification: if hunchback dead, no more wolves")
		@if @false(@get(value.wolf)) @and @lt(@get(value.hunch),2) @then
			@set(temp.val,@rnd(1000))
			@if @gt(@get(temp.val),960) @then
				@set(value.wolf,true)
				@set(value.wolfxlim,75)
			@elseif @ge(@get(temp.val),900) @then
				@msg(message.wolf.1005)
			@endif
		@endif
		@if @true(@get(value.wolf)) @then
			@msg(message.wolf.1001)
			@if @le(@rnd(1000),400) @then
				@msg(message.wolf.1002)
				@if @lt(@rnd(1000),@get(value.wolfxlim)) @then
					@msg(message.wolf.1003)
					@dead
				@else
					@addto(value.wolfxlim,150)
					@msg(message.wolf.1004)
				@endif
			@endif
		@endif
	@endif
system.after_prompt
	
system.dont_understand
	\n  I don't understand "{0}".
system.dont_understand_that
	\n  I don't understand that.
system.do_what_with
	\n  Do what with the "{0}"?
system.gamename
	Castlequest
system.intro
	\s Castlequest (C) 1980\n\n  By Michael S. Holtzman and Mark Kershenblatt.\n\n  Port to GRIF by Scott Bakker (C) 2024\n\n
system.output_width
	-1
system.prompt
	\n
system.wordsize
	4
value.bat
	true
value.bat.comment
	BAT IN ATTIC?
value.blood
	false
value.blood.comment
	BLOOD IN BOTTLE?
value.bottle
	false
value.bottle.comment
	BOTTLE FILLED?
value.but
	0
value.but.comment
	BUTLER(0=SLEEPING,1=AWAKE,2=HOLDING NOTE,3=GONE FOR GOOD,4=DEAD AS A DOORNAIL)
value.butval
	5
value.butval.comment
	POINTS FOR READING FIRST NOTE (ZERO FOR SECOND)
value.debug
	false
value.fire
	true
value.fire.comment
	IS FIRE BURNING?
value.gnome
	false
value.gnome.comment
	IS THE GNOME IN THE ROOM?
value.gun
	false
value.gun.comment
	IS GUN LOADED?
value.hole
	false
value.hole.comment
	CYCLOPS SHAPED HOLE IN DOOR?
value.hunch
	0
value.hunch.comment
	HUNCHBACK(0=HUNGRY,1=FOLLOWING,2=GONE)
value.ibrief
	0
value.ibrief.comment
	0=VERBOSE UNTIL VISITED, 1=BRIEF
value.ipass
	0
value.ipass.comment
	HIDDEN PASSAGE, 0=CLOSED, 1=OPEN
value.lamp
	0
value.lamp.comment
	STATUS OF LAMP (0=OFF,1=ON,2=DIM,3=EMPTY)
value.lampdim
	125
value.lampdim.comment
	LAMP MOVES UNTIL DIM - CQ1980 = 75
value.lampout
	150
value.lampout.comment
	LAMP MOVES UNTIL OUT - CQ1980 = 100
value.lmove
	0
value.lmove.comment
	# MOVES WITH LAMP LIT.
value.lock
	0
value.lock.comment
	0=LOCKED,1=1ST #,2=2ND #,3=OPEN.
value.lokval
	5
value.lokval.comment
	POINTS FOR OPENING COMBINATION LOCK
value.lroom
	1
value.lroom.comment
	LAST ROOM
value.mas1
	false
value.mas1.comment
	MASTER SECTION ROOM 95
value.mas2
	false
value.mas2.comment
	MASTER SECTION ROOM 96
value.mas3
	false
value.mas3.comment
	MASTER SECTION ROOM 97
value.mas4
	false
value.mas4.comment
	MASTER SECTION ROOM 98
value.masect
	false
value.masect.comment
	IN MASTER SECTION?
value.master
	0
value.master.comment
	(0=IN COFFIN,1=ASLEEP,2=PINNED,3=UP,4=DEAD)
value.match
	0
value.match.comment
	MATCHES(0=UNLIT,1=LIT,2=GONE)
value.max
	99
value.max.comment
	MAX POSSIBLE TREASURE SCORE (GOES DOWN IF ITEMS LOST)
value.maxinv
	10
value.maxinv.comment
	NUMBER OF ITEMS ALLOWED IN INVENTORY
value.maxscr
	300
value.maxscr.comment
	MAXIMUM POSSIBLE SCORE
value.melt
	false
value.melt.comment
	HOLE MELTED IN ICE?
value.mmove
	0
value.mmove.comment
	# MOVES WITH MATCHES LIT.
value.ndeath
	0
value.ndeath.comment
	NUMBER OF TIMES PLAYER HAS DIED.
value.nitems
	30
value.nitems.comment
	HIGHEST ITEM NUMBER
value.norandom
	false
value.norandom.comment
	TRUE=ALL RANDOM EVENTS OFF (WOLF,GNOME,FOOTSTEPS,MIRROR MAZE)
value.note
	0
value.note.comment
	NUMBER OF NOTE BUTLER IS HOLDING.
value.notval
	15
value.notval.comment
	POINTS FOR READING COMBINATION
value.nrooms
	100
value.nrooms.comment
	HIGHEST ROOM NUMBER
value.numb
	0
value.numb.comment
	NUMBER OF ITEMS BEING CARRIED.
value.numove
	0
value.numove.comment
	NUMBER OF MOVES (NOT CALCULATED THE SAME AS CQ1980)
value.prec
	false
value.prec.comment
	ROPE HOOKED TO PRECIPICE?
value.room
	1
value.room.comment
	CURRENT ROOM
value.rope
	0
value.rope.comment
	(0=LOOSE,1=TIED TO BED,2=HANGING,-2=GONE,3=TIED TO HOOK)
value.ropval
	10
value.ropval.comment
	POINTS FOR USING ROPE
value.score
	0
value.score.comment
	ACCUMULATED SCORE.
value.shuttr
	0
value.shuttr.comment
	STATUS OF SHUTTER (0=CLOSED, 1=OPEN)
value.sun
	0
value.sun.comment
	IS SUN UP(0=UP,1=SETTING)
value.torch
	false
value.torch.comment
	IS TORCH LIT?
value.water
	false
value.water.comment
	WATER IN BOTTLE?
value.wind1
	0
value.wind1.comment
	WINDOW IN ROOM 1 (0=NAILED,1=BROKEN,2=BARRED,3=OPEN)
value.wind2
	0
value.wind2.comment
	WINDOW IN ROOM 10 (0=NAILED,1=BROKEN,3=OPEN)
value.wiz
	true
value.wiz.comment
	WIZARD STILL AROUND?
value.wolf
	false
value.wolf.comment
	IS THE WOLF IN THE ROOM?
verb.1
	N,NORT
verb.2
	NE
verb.3
	E,EAST
verb.4
	SE
verb.5
	S,SOUT
verb.6
	SW
verb.7
	W,WEST
verb.8
	NW
verb.9
	CLIM,U,UP
verb.10
	D,DOWN
verb.11
	T,TAKE
verb.12
	DROP
verb.13
	ENTE,IN
verb.14
	EXIT,LEAV,OUT
verb.15
	ATTA,KILL
verb.17
	THRO
verb.18
	LOAD
verb.19
	FUCK
verb.20
	SHOW,WAVE
verb.21
	STAB
verb.22
	FEED
verb.23
	EAT
verb.24
	DRIN
verb.25
	JUMP
verb.26
	INVE
verb.27
	OPEN
verb.28
	CLOS
verb.29
	LOCK
verb.30
	UNLO
verb.31
	ON
verb.32
	LIGH
verb.33
	OFF
verb.34
	EXTI
verb.35
	LOOK
verb.36
	SCOR
verb.37
	BREA,CHOP
verb.38
	WATE
verb.39
	POUR
verb.40
	BACK
verb.41
	SWIM
verb.42
	MELT
verb.43
	CROS
verb.44
	QUIT
verb.45
	HONK
verb.46
	TIE
verb.47
	UNTI
verb.48
	READ
verb.49
	FILL
verb.50
	HELP,HINT
verb.52
	L,LEFT
verb.53
	R,RIGH
verb.54
	FIRE,SHOO
verb.55
	WAKE
verb.56
	POOF
verb.57
	SAVE,SUSP
verb.58
	REST
verb.60
	LONG,VERB
verb.61
	BRIE
wher.1
	28
wher.2
	15
wher.3
	28
wher.4
	9
wher.5
	28
wher.6
	15
wher.7
	15
wher.8
	9
wher.9
	28
wher.10
	15
